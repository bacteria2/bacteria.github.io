webpackJsonp([1,2],{107:function(e,t,n){"use strict";var l=n(733),a=n.n(l),i=n(16),s=n.n(i),o=n(714),r=n.n(o),c=n(734),u=n.n(c),d=n(728),p=n.n(d),f=n(717),m=n.n(f),v=n(736),_=n.n(v),b=n(731),h=n.n(b),w=n(719),y=n.n(w),x=n(720),k=n.n(x),g=n(727),S=n.n(g),$=n(730),F=n.n($),T=n(718),N=n.n(T),I=n(715),L=n.n(I),E=n(729),P=n.n(E),C=n(713),O=n.n(C),R=n(732),D=n.n(R),z=n(724),j=n.n(z),M=n(737),H=n.n(M),q=n(722),A=n.n(q),B=n(738),Y=n.n(B),W=n(726),U=n.n(W),V=n(725),J=n.n(V),Q=n(723),G=n.n(Q),X=n(721),K=n.n(X),Z=n(735),ee=n.n(Z),te=n(716),ne=n.n(te),le={TableInput:a.a,TableOutput:u.a,ReplaceString:p.a,Dummy:m.a,Unique:_.a,SortRows:h.a,SystemInfo:D.a,InsertUpdate:j.a,Validator:H.a,getXMLData:K.a,DBProc:ne.a,FilterRows:y.a,GetVariable:k.a,Normaliser:S.a,SetVariable:F.a,ExecSQL:N.a,Calculator:L.a,RowGenerator:P.a,HTTP:A.a,LoadFileInput:U.a,JsonInput:J.a,WebServiceLookup:Y.a,HTTPPOST:G.a,TextFileOutput:ee.a};for(var ae in le)s.a.component(ae,le[ae]);s.a.component("stepNode",r.a),s.a.component("helpInfo",O.a),t.a=le},108:function(e,t,n){"use strict";var l=n(58),a=n.n(l),i=n(4),s=n(57);t.a={mounted:function(){var e=this;s.a.requestSourceList().then(function(t){e.dataSource.sourceList=t.data.ds}).catch(function(t){e.$notify.error({title:"错误",message:"获取数据库列表失败",duration:2e3,offset:200})})},watch:{"step.connection":function(e,t){var n=this;e&&"object"!==("undefined"==typeof e?"undefined":a()(e))&&s.a.requestSourceInstanceById(e).then(function(e){n.dataSource.tables=e.data,n.firstLoad||(n.step.table="")}).catch(function(e){n.dataSource.tables=[],n.step.table="",n.$notify.error({title:"错误",message:"获取table列表失败",duration:2e3,offset:200})})}},computed:{selectedTable:function(){var e=this.step.table,t=this.dataSource.tables.filter(function(t){return t.name==e});return t.length>0?t[0]:""}},data:function(){return{dataSource:n.i(i.e)(),firstLoad:!0,rules:{connection:[{required:!0,message:"请选择数据库",trigger:"change"}],table:[{required:!0,message:"请选择一张表",trigger:"change"}]}}},methods:{fetchFieldsFromTable:function(e){var t=this.selectedTable,n={};t&&t.columnList?(this.step.availableFields.forEach(function(e){var t=e.name.indexOf(".")+1,l=e.name;t>0&&(l=e.name.substring(t)),n[l.toUpperCase()]=e.name}),"function"==typeof e&&e(n,t)):this.$refs.form.validate()}}}},257:function(e,t,n){n(584);var l=n(2)(n(302),n(756),"data-v-25f40486",null);e.exports=l.exports},258:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(16),a=n.n(l),i=(n(107),n(712)),s=n.n(i),o=n(559),r=n.n(o),c=n(573);n.n(c);a.a.use(r.a),new a.a({el:"#vueApp",template:"<app></app>",components:{app:s.a}})},300:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(742),a=n.n(l),i=n(741),s=n.n(i);t.default={name:"app",mounted:function(){var e=new RegExp("(^| )readOnly=([^;]*)(;|$)"),t=document.cookie.match(e);this.readOnly=!(!t||"1"!=t[2])},components:{drawArea:s.a,tree:a.a},data:function(){return{readOnly:!1}}}},301:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{text:{String:String,default:"这是帮助内容"},width:{Number:Number,default:200}},data:function(){return{}}}},302:function(e,t,n){"use strict";function l(e){if(e||void 0===r){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var n=document.createElement("div"),l=n.style;l.position="absolute",l.top=0,l.left=0,l.pointerEvents="none",l.visibility="hidden",l.width="200px",l.height="150px",l.overflow="hidden",n.appendChild(t),document.body.appendChild(n);var a=t.offsetWidth;n.style.overflow="scroll";var i=t.offsetWidth;a===i&&(i=n.clientWidth),document.body.removeChild(n),r=a-i}return r}Object.defineProperty(t,"__esModule",{value:!0});var a=n(109),i=n.n(a),s=n(339),o=n.n(s),r=void 0,c="ivu-modal";t.default={props:{value:{type:Boolean,default:!1},closable:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},title:{type:String},width:{type:[Number,String],default:680},okText:{type:String,default:function(){return"ok"}},cancelText:{type:String,default:function(){return"cancel"}},loading:{type:Boolean,default:!1},styles:{type:Object},className:{type:String},footerHide:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1}},data:function(){return{prefixCls:c,wrapShow:!1,showHead:!0,buttonLoading:!1,visible:this.value}},computed:{wrapClasses:function(){var e;return[c+"-wrap",(e={},o()(e,c+"-hidden",!this.wrapShow),o()(e,""+this.className,!!this.className),e)]},maskClasses:function(){return c+"-mask"},classes:function(){return""+c},mainStyles:function(){var e={},t={width:this.width+"px"},n=this.styles?this.styles:{};return i()(e,t,n),e}},methods:{close:function(){this.visible=!1,this.$emit("input",!1),this.$emit("on-cancel")},mask:function(){this.maskClosable&&this.close()},handleWrapClick:function(e){var t=e.target.getAttribute("class");t&&t.indexOf(c+"-wrap")>-1&&this.mask()},cancel:function(){this.close()},ok:function(){this.loading?this.buttonLoading=!0:(this.visible=!1,this.$emit("input",!1)),this.$emit("on-ok")},EscClose:function(e){this.visible&&this.closable&&27===e.keyCode&&this.close()},checkScrollBar:function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.bodyIsOverflowing&&(this.scrollBarWidth=l())},setScrollBar:function(){this.bodyIsOverflowing&&void 0!==this.scrollBarWidth&&(document.body.style.paddingRight=this.scrollBarWidth+"px")},resetScrollBar:function(){document.body.style.paddingRight=""},addScrollEffect:function(){this.checkScrollBar(),this.setScrollBar(),document.body.style.overflow="hidden"},removeScrollEffect:function(){document.body.style.overflow="",this.resetScrollBar()}},mounted:function(){this.visible&&(this.wrapShow=!0);var e=!0;void 0!==this.$slots.header||this.title||(e=!1),this.showHead=e,document.addEventListener("keydown",this.EscClose)},beforeDestroy:function(){document.removeEventListener("keydown",this.EscClose),this.removeScrollEffect()},watch:{value:function(e){this.visible=e},visible:function(e){var t=this;e===!1?(this.buttonLoading=!1,this.timer=setTimeout(function(){t.wrapShow=!1,t.removeScrollEffect()},300)):(this.timer&&clearTimeout(this.timer),this.wrapShow=!0,this.scrollable||this.addScrollEffect())},loading:function(e){e||(this.buttonLoading=!1)},scrollable:function(e){e?this.removeScrollEffect():this.addScrollEffect()}}}},303:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(80),a=n(107),i=n(170),s=n(691);n.n(s);t.default={props:["id","index"],store:l.a,mounted:function(){var e=this.$el;jsPlumb.draggable(e,{containment:!0}),jsPlumb.makeSource(e,{filter:".ep",anchor:"Continuous",connectorStyle:{stroke:"#5c96bc",strokeWidth:2,outlineStroke:"transparent",outlineWidth:4},connectionType:"basic",maxConnections:-1,deleteEndpointsOnDetach:!1}),jsPlumb.makeTarget(e,{dropOptions:{hoverClass:"dragHover"},anchor:"Continuous",allowLoopback:!1})},computed:n.i(i.a)({step:function(){return this.$store.state.step.steps[this.id]}}),data:function(){return{}},methods:{trimDotAndPx:function(e){var t=void 0;return(t=e.search("\\."))!==-1?e.substring(0,t):e.replace("px","")},updateXY:function(){var e=this.trimDotAndPx(this.$el.style.left),t=this.trimDotAndPx(this.$el.style.top);this.$store.commit("updateXY",{id:this.$el.id,left:e,top:t})},openEdit:function(){a.a[this.step.type]?this.$store.commit("openWin",{activeNode:this.id,currentView:this.step.type}):alert("未注册的Step")}}}},304:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(4),a=n(7);t.default={mixins:[a.a],computed:{mergedField:function(){var e=this;return this.step.availableFields.concat(this.step.fields.map(function(t){return{name:t.field_name,step:e.step.name}})).filter(function(e){return""!==e.name})}},data:function(){return{step:l.b.Calculator(),options:l.c}},methods:{updateFields:function(){this.step.outputFields=this.step.fields.map(function(e){return e.field_name})}}}},305:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(57),a=n(4),i=n(7);n(108);t.default={mounted:function(){var e=this;l.a.requestSourceList().then(function(t){e.dataSourceList=t.data.ds}).catch(function(t){e.$notify.error({title:"错误",message:"获取数据库列表失败",duration:2e3,offset:200})})},mixins:[i.a],data:function(){return{dataSourceList:"",step:a.b.DBProc(),options:{types:a.c.inputTypes,directions:a.c.directions}}},methods:{querySearch:function(e,t){var n=this.step.availableFields;e&&(n=n.filter(function(t){return 0===t.name.toLowerCase().indexOf(e.toLowerCase())})),t(n.map(function(e){return{value:e.name}}))},fetchFields:function(){this.step.fields=this.step.availableFields.map(function(e){return a.d.DBProc({name:e.name,edit:!1})})},updateFields:function(){var e=this.step.fields.filter(function(e){return"OUT"===e.direction}).map(function(e){return e.name});this.step.result_name&&e.push(this.step.result_name),this.step.outputFields=e}}}},306:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(4),a=n(7);t.default={mixins:[a.a],data:function(){return{step:l.b.Dummy()}}}},307:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(4),a=n(7),i=n(57);t.default={mixins:[a.a],data:function(){return{step:l.b.ExecSQL(),dataSource:n.i(l.e)()}},mounted:function(){var e=this;i.a.requestSourceList().then(function(t){e.dataSource.sourceList=t.data.ds}).catch(function(t){e.$notify.error({title:"错误",message:"获取数据库列表失败",duration:2e3,offset:200})})},methods:{addCondition:function(){this.step.fields.push(l.d.ExecSQL())},fetchFieldsFromInput:function(){this.step.fields=this.step.availableFields.map(function(e){return{edit:!1,name:e.name}})},updateFields:function(){var e=[];this.step.insert_field&&""!=this.step.insert_field.trim()&&e.push(this.step.insert_field),this.step.update_field&&""!=this.step.update_field.trim()&&e.push(this.step.update_field),this.step.delete_field&&""!=this.step.delete_field.trim()&&e.push(this.step.delete_field),this.step.outputFields=[]}}}},308:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(7),a=n(4),i=n(739),s=n.n(i);t.default={mixins:[l.a],data:function(){return{step:a.b.FilterRows(),tabs:{tabList:[],activeTabIndex:"0"}}},watch:{"step.send_true_to":function(e,t){var n="trueLabel",l=this.step.id;try{e?this.$store.commit("changeLabel",{id:l,newId:e,oldId:t,labelId:n}):this.$store.commit("changeLabel",{id:l,oldId:t,labelId:n})}catch(e){this.step.send_true_to=""}},"step.send_false_to":function(e,t){var n="falseLabel",l=this.step.id;try{e?this.$store.commit("changeLabel",{id:l,newId:e,oldId:t,labelId:n}):this.$store.commit("changeLabel",{id:l,oldId:t,labelId:n})}catch(e){this.step.send_false_to=""}}},methods:{addRecord:function(){this.step.conditions.push(a.d.FilterRows())},editCondition:function(e,t){var n=e+1,l=this.tabs.tabList.filter(function(e){return e.index==n});l.length>0?this.tabs.activeTabIndex=l[0].index:this.addNewTab(n)},deleteCondition:function(e,t){e<this.step.conditions.length&&(this.removeTab(e+1+""),this.step.conditions.splice(e,1))},addNewTab:function(e){var t=e+"";this.tabs.tabList.push({index:t,content:""}),this.tabs.activeTabIndex=t},removeTab:function(e){var t=this.tabs.tabList,n=this.tabs.activeTabIndex;this.tabs.tabList=t.filter(function(t){return t.index!==e}),n===e&&t.forEach(function(l,a){if(l.index===e){var i=t[a+1]||t[a-1];n=null!=i?i.index:"0"}}),this.tabs.activeTabIndex=n}},components:{Editor:s.a}}},309:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(4),a=n(7);t.default={mixins:[a.a],data:function(){return{options:l.c,step:l.b.GetVariable()}},methods:{updateFields:function(){this.step.outputFields=this.step.fields.map(function(e){return e.name})}}}},310:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(4),a=n(7);t.default={mixins:[a.a],data:function(){return{customParams:{width:"800px"},step:l.b.getXMLData(),activeName:"first",options:{types:l.c.inputTypes,trimType:l.c.trimType}}},methods:{updateFields:function(){this.step.outputFields=this.step.fields.map(function(e){return e.name})}}}},311:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(4),a=n(7);t.default={mixins:[a.a],data:function(){return{activeName:"first",step:l.b.HTTP()}},methods:{addQueryParam:function(){this.step.paramList.push(l.d.HTTP())},addQueryHeader:function(){this.step.headerList.push(l.d.HTTP())},fetchFromInputStream:function(){return this.step.availableFields.map(function(e){return{name:e.name,parameter:e.name}})},updateFields:function(){var e=this.step.result;this.step.outputFields=[e.name,e.code,e.response_time,e.response_header].filter(function(e){return""!=e})}}}},312:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(4),a=n(7);t.default={mixins:[a.a],data:function(){return{activeName:"first",step:l.b.HTTPPOST()}},methods:{addQuery:function(){this.step.queryList.push(l.d.HTTPPOST())},addArg:function(){this.step.argList.push(l.d.HTTPPOST({type:"arg"}))},fetchFromInputStream:function(e){return"arg"==e?this.step.availableFields.map(function(e){return{name:e.name,parameter:e.name,header:"N"}}):this.step.availableFields.map(function(e){return{name:e.name,parameter:e.name}})},updateFields:function(){var e=this.step.result;this.step.outputFields=[e.name,e.code,e.response_time,e.response_header].filter(function(e){return""!=e})}}}},313:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(4),a=n(7),i=n(108);t.default={mixins:[a.a,i.a],data:function(){return{step:l.b.InsertUpdate(),options:l.c}},methods:{transportFields:function(e,t){this.step.updateList=t.columnList.map(function(t){return{name:t.name,rename:e[t.name.toUpperCase()],update:"Y",edit:!1}})},addUpdate:function(){this.step.updateList.push(l.d.InsertUpdate({edit:!1,type:"update"}))},addQuery:function(){this.step.queryList.push(l.d.InsertUpdate({edit:!1}))}}}},314:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(4),a=n(7);t.default={mixins:[a.a],watch:{fieldType:function(e){2==e?(this.step.isAFile="Y",this.step.readurl="N"):3==e?(this.step.isAFile="N",this.step.readurl="Y"):(this.step.isAFile="N",this.step.readurl="N")}},mounted:function(){var e="Y"==this.step.isAFile,t="Y"==this.step.readurl;e&&t||(this.fieldType=1),e&&(this.fieldType=2),t&&(this.fieldType=3)},data:function(){return{activeName:"first",step:l.b.JsonInput(),fieldType:-1,inputType:l.c.inputTypes}},methods:{addOutPut:function(){this.step.fields.push(l.d.JsonInput())},updateFields:function(){var e=this.step.fields;e.length>0&&(this.step.outputFields=e.map(function(e){return e.name}).filter(function(e){return""!=e}))}}}},315:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(4),a=n(7);t.default={mixins:[a.a],mounted:function(){var e=this.step.fileName;if(""!=e){var t=e.indexOf("}");this.filePath=e.substring(0,t+1),this.fileName=e.substring(t+1)}},watch:{filePath:function(e){this.setFileName()},fileName:function(e){this.setFileName()}},data:function(){return{activeName:"first",step:l.b.LoadFileInput(),filePath:"",fileName:""}},methods:{setFileName:function(){this.step.fileName=this.filePath+this.fileName},addOutPut:function(){this.step.fields.length>0?this.confirm("该操作将重置输出列表，是否继续？",this.doAddOutPut):this.doAddOutPut()},doAddOutPut:function(){this.step.fields=[],this.step.fields.push(l.d.LoadFileInput({name:"file_content",element_type:"content",type:"String",trim_type:"both"})),this.step.fields.push(l.d.LoadFileInput({name:"file_size",element_type:"size",type:"Integer",trim_type:"none"}))},updateFields:function(){var e=this.step.fields;e.length>0&&(this.step.outputFields=e.map(function(e){return e.name}).filter(function(e){return""!=e}))}}}},316:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(4),a=n(7);t.default={mixins:[a.a],data:function(){return{step:l.b.Normaliser()}},methods:{fetchFieldsFromTable:function(){this.step.fields=this.step.availableFields.map(function(e){return l.d.Normaliser({name:e.name})})}}}},317:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(4),a=n(7);t.default={mixins:[a.a],data:function(){return{step:l.b.ReplaceString()}},methods:{updateFields:function(){this.step.fields&&(this.step.outputFields=this.step.fields.map(function(e){return e.out_stream_name}))},fetchFieldsFromInput:function(){this.step.fields=this.step.availableFields.map(function(e){return l.d.ReplaceString({in_stream_name:e.name})})}}}},318:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(4),a=n(7);t.default={mixins:[a.a],data:function(){return{step:l.b.RowGenerator(),options:l.c}},methods:{updateFields:function(){this.step.outputFields=this.step.fields.map(function(e){return e.name})}}}},319:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(4),a=n(7);t.default={mixins:[a.a],data:function(){return{step:l.b.SetVariable(),options:l.c}},methods:{fetchFieldsFromTable:function(){this.step.fields=this.step.availableFields.map(function(e){return l.d.SetVariable({field_name:e.name})})}}}},320:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(4),a=n(7);t.default={mixins:[a.a],data:function(){return{step:l.b.SortRows()}},methods:{fetchFields:function(){this.step.fields=this.step.availableFields.map(function(e){return l.d.SortRows({name:e.name})})}}}},321:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(4),a=n(7);t.default={mixins:[a.a],data:function(){return{step:l.b.SystemInfo(),options:l.c}},methods:{updateFields:function(){this.step.outputFields=this.step.fields.map(function(e){return e.name})}}}},322:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(58),a=n.n(l),i=n(4),s=n(57),o=n(7),r=n(164),c=n.n(r);t.default={mixins:[o.a],watch:{"step.connection":function(e){var t=this;e&&"object"!=("undefined"==typeof e?"undefined":a()(e))&&s.a.requestSourceInstanceById(e).then(function(n){t.dbType=t.dbTypeMap[e],t.dataSource.tables=n.data;for(var l in t.dataSource.tables){var a=t.dataSource.tables[l];a.selectedFields=[],a.isIndeterminate=!1,a.selectedAllFields=!1;for(var i in a.columnList){var s=a.columnList[i];s.selected=!1}}})},"step.ext.tables":function(e){if(this.selectedTableSize=e.length,this.selectedTableSize>1){var t=this.step.ext.joins,n=t.filter(function(t){return e.includes(t.parent)&&e.includes(t.client)});this.step.ext.joins=n}}},mounted:function(){var e=this;s.a.requestSourceList().then(function(t){var n=t.data.ds;e.dataSource.sourceList=n,n.forEach(function(t){e.dbTypeMap[t.id]=t.dbType})},function(e){}),this.joinsConditions.condition=this.step.ext.conditiontype;var t=parent.innerHeight-289;t>this.maxHeight&&(this.maxHeight=t)},data:function(){return{step:i.b.TableInput({name:"",x:120,y:20}),dataSource:n.i(i.e)(),joinsConditions:{parentFields:[],condition:[],clientFields:[],curRow:{},rowIndex:-1},isShow:!1,selectedTableSize:0,curEditTable:{table:{},fields:[],selectedFields:[],isIndeterminate:!1,selectedAllFields:!1},curRowIndex:"",fieldBoxMaxHeight:!1,dbType:"",dbTypeMap:{},maxHeight:300,filterName:"",rules:{connection:[{required:!0,message:"请选择数据源",trigger:"change"}]}}},methods:{showSqlBuild:function(){this.isShow=!0},handleSelectionChange:function(e){this.step.ext.tables=e},setJoinConditions:function(e,t){var n=e.parent,l=e.client;return""==n||""==l?void this.warning("请先选择主表和子表，再设置关联条件"):(this.joinsConditions.parentFields=c()(n.selectedFields),this.joinsConditions.clientFields=c()(l.selectedFields),this.joinsConditions.curRow=e,void(this.joinsConditions.rowIndex=t))},conditionsPlusHandle:function(){var e=i.b.TableInput().ext.joins[0].conditions[0],t=this.joinsConditions.curRow,n=t.conditions.length-1,l=t.conditions[n].index+1;e.index=l,t.conditions.push(e),t.logic=this.logicHandle()},conditionsMinusHandle:function(e,t){if(0==e)this.warning("首行数据不能删除！");else{var n=this.joinsConditions.curRow;n.conditions.splice(t,1),1==n.conditions.length?n.logic="#0":n.logic=this.logicHandle()}},logicHandle:function(){var e=this.joinsConditions.curRow.conditions,t="#",n="";return e.forEach(function(e){var l=e.index,a="";a=a.concat(t,l),n=""==n?a:n.concat(" and ",a)}),n},joinsPlusHandle:function(e){var t=i.b.TableInput().ext.joins[0];this.step.ext.joins.push(t)},joinsMinusHandle:function(e){0==e?this.$message({message:"首行数据不能删除！",type:"warning"}):this.step.ext.joins.splice(e,1)},buildSql:function(){var e=this,t=this.step.connection;if(this.selectedTableSize>1){if(!this.checkJoinsData())return void this.warning("请检查，关联信息设置不完整");s.a.tableInputGetSql(e.step.ext.joins,t).then(function(t){var n=t.data;e.step.sql=n.sql,e.step.outputFields=n.fields},function(e){})}else{if(1!=this.selectedTableSize)return void this.warning("构建SQL，最少要选一张表");var n=e.step.ext.tables[0],l=!0,a=n.columnList;for(var i in a)if(1==a[i].selected){l=!1;break}if(l)return void this.warning("最少要选择一个字段");s.a.tableInputGetSimpleSql(n,t).then(function(t){var n=t.data;e.step.sql=n.sql,e.step.outputFields=n.fields},function(e){})}this.isShow=!1},showSetFields:function(e,t){var n=this.curEditTable;n.table=e,n.fields=e.columnList;var l=e.selectedAllFields,a=e.selectedFields,i=e.isIndeterminate;n.selectedAllFields=l,n.isIndeterminate=i,n.selectedFields=a,this.curRowIndex=t,n.fields&&n.fields.length>9?this.fieldBoxMaxHeight=!0:this.fieldBoxMaxHeight=!1},sycTable:function(){var e=this.curEditTable.table;e.selectedFields=this.curEditTable.selectedFields,e.selectedAllFields=this.curEditTable.selectedAllFields,e.isIndeterminate=this.curEditTable.isIndeterminate},handleCheckAllChange:function(e){var t=e.target.checked;this.curEditTable.selectedFields=t?this.curEditTable.fields:[],this.curEditTable.selectedAllFields=t,this.curEditTable.isIndeterminate=!1;var n=this.curEditTable.fields;for(var l in n)n[l].selected=t;this.sycTable()},handleCheckedCitiesChange:function(e){var t=e.length;this.curEditTable.selectedAllFields=t===this.curEditTable.fields.length,this.curEditTable.isIndeterminate=t>0&&t<this.curEditTable.fields.length;var n=this.curEditTable.fields;for(var l in n)n[l].selected=!1;for(var a in e)e[a].selected=!0;this.sycTable()},setRowColor:function(e,t){return t==this.curRowIndex?{"background-color":" #e2f0e4"}:{}},setRowColor2:function(e,t){return t==this.joinsConditions.rowIndex?{"background-color":" #e2f0e4"}:{}},tabClickHandler:function(e){if(this.reSetJoinsConditions(),"join"==e.name){var t=this.step.ext.joins;t.length<1&&t.push({parent:"",client:"",joinType:"INNER JOIN",conditions:[{field:"",cndType:"=",value:"",index:0}],logic:"#0"})}},reSetJoinsConditions:function(){this.joinsConditions={parentFields:[],condition:this.step.ext.conditiontype,clientFields:[],curRow:{},rowIndex:-1}},checkJoinsData:function(){var e=this.step.ext.joins;if(e.length<1)return!1;for(var t in e){var n=e[t];if(""==n.parent||""==n.client)return!1;var l=n.conditions;for(var a in l){var i=l[a];if(""==i.field||""==i.value)return!1}}return!0},testSQL:function(){var e=this.step.sql;if(!this.step.connection)return void this.warning("数据源不能为空");if(!e)return void this.warning("sql 语句不能为空");if(e=e.toUpperCase(),e.indexOf("SELECT")==-1||e.indexOf("FROM")==-1)return void this.warning("sql 语句最小包含Select 和 from 关键字");var t=this;return s.a.testSql(t.step.sql,t.step.connection).then(function(e){var n=e.data;"success"==n.code?(t.step.outputFields=n.data.fields,t.success("SQL 语句运行测试通过")):t.notify("SQL 测试异常")},function(e){t.notify("SQL 测试异常")})},filterTable:function(){var e=this.filterName,t=[],n=this.dataSource.tables,l=n.filter(function(n,l,a){var i=void 0,s=void 0;i=n.name,s=n.cnname;var o=i.search(e)+s.search(e)!=-2;return o&&t.push(l),o}),a=t.reverse();a.forEach(function(e){n.splice(e,1)}),l.forEach(function(e){n.splice(0,0,e)})}}}},323:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(4),a=n(7),i=n(108);t.default={mixins:[a.a,i.a],data:function(){return{step:l.b.TableOutput({name:"1231",x:120,y:20}),selectRow:[]}},methods:{transportFields:function(e,t){this.step.fields=t.columnList.map(function(t){return{column_name:t.name,stream_name:e[t.name.toUpperCase()],edit:!1}})},updateFields:function(){this.step.outputFields=this.step.fields.map(function(e){return e.stream_name})},addRecord:function(){var e=this;this.$refs.form.validate(function(t){return!!t&&void e.step.fields.push({column_name:"",stream_name:"",edit:!0})})}}}},324:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(4),a=n(7);t.default={mixins:[a.a],mounted:function(){var e=this.step.file.name;if(e&&""!=e){var t=e.indexOf("}");this.filePath=e.substring(0,t+1),this.fileName=e.substring(t+1)}},watch:{filePath:function(e){this.setFileName()},fileName:function(e){this.setFileName()},"step.fileNameInField":function(e){"Y"==e&&(this.filePath="",this.fileName="",this.step.file.add_date="N",this.step.file.add_time="N")}},data:function(){return{activeName:"first",step:l.b.TextFileOutput(),filePath:"",fileName:"",trimType:l.c.trimType,inputType:l.c.inputTypes,format:l.c.format}},methods:{setFileName:function(){this.step.file.name=this.filePath+this.fileName},addOutPut:function(){this.step.fields.push(l.d.TextFileOutput())},updateFields:function(){var e=this.step.fields;e.length>0&&(this.step.outputFields=e.map(function(e){return e.name}).filter(function(e){return""!=e}))}}}},325:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(4),a=n(7);t.default={mixins:[a.a],data:function(){return{msg:"hello vue",step:l.b.Unique()}},methods:{obtainFields:function(){var e=this.step.availableFields;e&&e.length>0&&(this.step.fields=e.map(function(e){return{name:e.name,case_insensitive:"Y",edit:!1}}))}}}},326:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(4),a=n(7),i=n(740),s=n.n(i),o=n(257),r=n.n(o);t.default={mixins:[a.a],components:{Modal:r.a,Editor:s.a},data:function(){return{step:l.b.Validator(),showModal:!1,currentIndex:0}},watch:{"step.send_false_to":function(e,t){var n="falseLabel",l=this.step.id;try{e?this.$store.commit("changeLabel",{id:l,newId:e,oldId:t,labelId:n}):this.$store.commit("changeLabel",{id:l,oldId:t,labelId:n})}catch(e){this.step.send_false_to=""}}},computed:{numArray:function(){return this.step.fields.map(function(e){return e._num}).sort(function(e,t){return e>t})}},methods:{showEditor:function(e){this.showModal=!0,this.currentIndex=e},addRecord:function(){var e=1;this.numArray.length>0&&this.numArray.forEach(function(t){e==t&&(e+=1)}),this.step.fields.push(l.d.Validator({validation_name:"数据校验"+e,_num:e}))}}}},327:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(4),a=n(7),i=n(57);t.default={mixins:[a.a],data:function(){return{activeName:"first",step:l.b.WebServiceLookup(),webService:{nameSpace:"",interfaceList:[]},rules:{wsURL:[{required:!0,message:"url不能为空",trigger:"blur"}]}}},methods:{addFieldsIn:function(){this.step.fieldsInList.push(l.d.WebServiceLookup())},addFieldsOut:function(){this.step.fieldsOutList.push(l.d.WebServiceLookup())},loadService:function(){var e=this,t=this.step;this.$refs.form.validate(function(n){return!!n&&void i.a.webServiceAnalysis({url:t.wsURL,user:t.httpLogin,password:t.httpPassword}).then(function(t){e.webService=t.data,e.step.wsOperationNamespace=t.data.nameSpace,e.$notify({type:"success",title:"成功",message:"解析成功",duration:2e3,offset:200})}).catch(function(t){e.webService={nameSpace:"",interfaceList:[]},e.$notify.error({title:"错误",message:"解析url失败",duration:2e3,offset:200})})})},fetchFromService:function(e){var t=this,n=[],a=e||0,i=["inParms","outParms"][a||0];return""!==this.step.wsOperation&&this.webService.interfaceList.filter(function(e){return e.name===t.step.wsOperation}).forEach(function(t){var a=t[i];Array.isArray(a)&&a.forEach(function(t){var a={wsName:t.name,xsdType:t.type};0===e?a.name="":a.name=t.name,n.push(l.d.WebServiceLookup(a))})}),n}}}},328:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(4);t.default={props:{condition:{type:Object,default:function(){return l.d.FilterRows()}},availableFields:{type:Array,default:function(){return[]}}},data:function(){return{options:l.c,dialogTableVisible:!1,modalAppendToBody:!1}}}},329:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(4),a=n(706),i=n.n(a);t.default={props:{field:{type:Object,default:function(){return l.d.Validator()}},availableFields:{type:Array,default:[]}},computed:{stepList:function(){return i()(this.availableFields.map(function(e){return{step:e.step,id:e.stepId}}),"id")},fieldList:function(){var e=this;return this.availableFields.filter(function(t){return t.stepId===e.field.sourcing_step})}},data:function(){return{activeName:"first",options:l.c}}}},330:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(80),a=n(743),i=n.n(a),s=n(596),o=(n.n(s),n(4)),r=n(693),c=n.n(r),u=n(107),d=n(57);t.default={store:l.a,mounted:function(){!function(e,t){function n(e,t){var n=t||!1;n?l.a.dispatch("removeConnection",e):l.a.dispatch("addConnection",e)}var a=l.a.state.step.connections;jsPlumb.importDefaults({Endpoint:["Dot",{radius:2}],Container:e,HoverPaintStyle:{stroke:"#1e8151",strokeWidth:2},Connector:"StateMachine",ConnectionOverlays:[["Arrow",{location:1,id:"arrow",length:14,foldback:.8}],["Label",{id:"trueLabel",cssClass:"leaf true"}],["Label",{id:"falseLabel",cssClass:"leaf false"}]]}),jsPlumb.registerConnectionType("basic",{anchor:"Continuous",connector:"StateMachine"}),jsPlumb.batch(function(){jsPlumb.bind("dblclick",function(e){t.$confirm("删除连接后，节点数据的引用关系会失效, 是否继续?","确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){jsPlumb.detach(e),l.a.dispatch("removeConnection",e),t.$message({type:"success",message:"删除成功!"})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}),jsPlumb.bind("connection",function(e){n(e.connection)}),jsPlumb.bind("beforeDrop",function(e){var t=e.connection,n=t.sourceId,l=t.targetId,i=a[l+"||"+n],s=a[n+"||"+l];return!i&&!s}),jsPlumb.bind("connectionDetached",function(e){n(e.connection,!0)})}),jsPlumb.ready(function(){var e=new RegExp("(^|&)id=([^&]*)(&|$)"),n=window.location.search.substr(1).match(e);n&&(t.$store.commit("setId",n[2]),t.initialization(n[2]))})}(this.$el.id,this)},props:{readOnly:{type:Boolean,default:!0}},data:function(){return{nodes:[],nodeTypes:[],typeCountObject:{}}},components:{editModal:i.a},watch:{nodes:function(e){var t={};e.forEach(function(e){var n=t[e.type];n&&Array.isArray(n)?n.push(e._num):t[e.type]=[e._num]}),this.typeCountObject=t}},methods:{description:function(){var e=this;this.$prompt("请设置备注信息","填写备注",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:this.$store.state.step.description}).then(function(t){var n=t.value;e.$store.commit("setDescription",n)})},save:function(){var e=this,t=this;this.$prompt("请设置转换名","保存转换",{confirmButtonText:"保存",cancelButtonText:"取消",inputValue:this.$store.state.step.name,beforeClose:this.nameExistCheck}).then(function(n){var l=n.value;e.$store.commit("setName",l),d.a.saveTransformation(t.$store.getters.kettleJson).then(function(e){var n=e.data;if("success"==n.result){var l=n.id;l&&""!=l&&t.$store.commit("setId",l),t.$message({message:n.msg,type:"success"})}else t.$message({message:n.msg,type:"error"})}).catch(function(e){t.$message.error(e.data.msg)})}).catch(function(){e.$message({type:"info",message:"已取消保存"})})},nameExistCheck:function(e,t,n){var l=t.inputValue;if(""==l&&"confirm"===e)return void this.$message({type:"info",message:"转换名称不能为空"});var a=this.$store.state.step.schemeId||"";"confirm"===e?d.a.nameExistCheck(l,a).then(function(e){var l=e.data;l.nameExist===!0?t.editorErrorMessage="方案名称重复":n();
}):n()},onDrop:function(e){var t=JSON.parse(e.dataTransfer.getData("Text")),n=t.validator;9999==n&&this.addNodeFromTree(e)},addNodeFromTree:function(e){var t=e.dataTransfer,n=e.offsetX,l=e.offsetY,a="a"+jsPlumbUtil.uuid().replace(/-/g,""),i=JSON.parse(t.getData("Text")),s=i.name,r=void 0===s?"emptyName":s,c=i.type,u=void 0===c?"NullType":c,d=o.b[u]({id:a,name:r,x:n,y:l,type:u,_num:1}),p=this.typeCountObject[u];p&&p.length>0&&p.forEach(function(e){d._num==e&&(d._num+=1)}),d.name=r+"_"+d._num,this.addNode(d)},addNode:function(e){var t=e.id,n=e.name,l=e.type,a=e.x,i=e.y,s=e._num;c()(o.b,l)?u.a[l]?(this.$store.commit("addNode",e),this.nodes.push({_num:s,id:t,type:l,name:n,x:a-25,y:i-25,ref:l+s})):this.$notify.error({title:"错误",message:"节点未注册!",duration:2e3,offset:200}):this.$notify.error({title:"错误",message:"节点type未定义!",duration:2e3,offset:200})},removeNode:function(e){var t=this;if(e<this.nodes.length){var n=this.nodes[e],l=n.name,a=n.id;this.$confirm("是否删除当前节点:"+l+"？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$store.commit("removeNodeById",a),t.nodes.splice(e,1),t.$message({type:"success",message:"删除成功!"})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}else this.$notify.error({title:"错误",message:"节点"+e+"不存在!"})},initialization:function(e){var t=this;d.a.requestSavingStepsFromServer(e).then(function(e){var n=e.data,l=n.hops,a=n.steps,i=n.name,s=n.description;a&&a.length>0&&(a.forEach(function(e){t.addNode(e)}),l&&l.length>0&&t.$nextTick(function(e){l.forEach(function(e){jsPlumb.connect({source:e.from,target:e.to,type:"basic"})})})),t.$store.commit("setName",i),t.$store.commit("setDescription",s)}).catch(function(n){t.$notify.error({title:"错误",message:"从服务器获取初始化数据错误 id:"+e+", resp:"+n,duration:4e3,offset:200})})}}}},331:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(335),a=n.n(l),i=n(4);t.default={data:function(){return{itemGroup:n.i(i.a)()||[{title:"空列表",items:[],collapsed:!1}]}},methods:{dragStart:function(e,t){var n=t.name,l=t.type;e.dataTransfer.setData("Text",a()({name:n,type:l,validator:9999}))}}}},332:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(80),a=n(170),i=n(333),s=n(257),o=n.n(s);t.default={store:l.a,computed:n.i(a.a)({showModal:function(e){return e.step.editModal.openWin},currentView:function(e){return e.step.editModal.currentView},activeNode:function(e){return e.step.editModal.activeNode}}),data:function(){return{modal1:!0,styles:{}}},components:{Modal:o.a},methods:{closeWithoutSave:function(){this.$store.commit("saveData",!1),this.$store.commit("closeWin")},closeWithSave:function(){var e=this.$refs.child.beforeSave;e?e(this.save):this.save()},fitStyle:function(e){e&&e.width?this.$set(this.styles,"width",e.width):navigator.userAgent.search("Trident")===-1&&navigator.userAgent.search("Edge")===-1?this.$set(this.styles,"width","fit-content"):this.styles={}},save:function(){var e=this,t=this.currentView,n=i.a[t],l=this.$refs.child.step;n?n(l,function(t,n){return t?(e.$message.error(t[0].message),void e.$store.commit("saveData",!1)):(e.$store.commit("saveData",!0),void e.$store.commit("closeWin"))}):(this.$store.commit("saveData",!0),this.$store.commit("closeWin"))}}}},333:function(e,t,n){"use strict";function l(e,t,n,l){var a=[],i=l||"error text";if(e&&Array.isArray(e)){var s=e.filter(n).length;s>0&&a.push(new Error(i))}t(a)}function a(e,t,n){var l=new i.default(n);return l.validate(e,t)}var i=n(172);t.a={TableOutput:function(e,t){var n={connection:{type:"string",required:!0,message:"请选择一个数据源"},fields:function(e,t,n){l(t,n,function(e){return null==e.stream_name||""==e.stream_name.trim()||null==e.column_name||""==e.column_name.trim()},"流字段或者表字段不能为空，删除记录或者修改空的字段")}};return a(e,t,n)},ReplaceString:function(e,t){var n={fields:function(e,t,n){l(t,n,function(e){var t=e.in_stream_name||"",n=e.out_stream_name||"";return""==t.trim()||""==n.trim()},"输入流字段或者输出字段不能为空，删除记录或者修改空的字段")}};return a(e,t,n)},Calculator:function(e,t){var n={fields:function(e,t,n){l(t,n,function(e){return""==e.field_name.trim()||""==e.field_name.trim()},"流字段不能为空，删除记录或者修改空的字段")}};return a(e,t,n)},RowGenerator:function(e,t){var n={fields:function(e,t,n){l(t,n,function(e){return""==e.name.trim()},"名称不能为空，删除记录或者修改空的字段")}};return a(e,t,n)},GetVariable:function(e,t){var n={fields:function(e,t,n){l(t,n,function(e){return""==e.name.trim()||""==e.variable.trim()},"名称或变量不能为空，删除记录或者修改空的字段")}};return a(e,t,n)},SystemInfo:function(e,t){var n={fields:function(e,t,n){l(t,n,function(e){return""==e.name.trim()||""==e.type.trim()},"名称或变量不能为空，删除记录或者修改空的字段")}};return a(e,t,n)},Validator:function(e,t){var n={send_false_to:{type:"string",required:!0,message:"请选择一个错误处理步骤"}};return a(e,t,n)}}},334:function(e,t,n){"use strict";var l=n(16),a=n.n(l),i=n(705),s=n.n(i),o=n(708),r=n.n(o),c=n(164),u=n.n(c),d=n(702),p=n.n(d),f={state:{name:"",schemeId:"",description:"",editModal:{activeNode:"",openWin:!1,currentView:"",saveData:!0,customParams:{}},nodeRelations:{},connections:{},steps:{}},getters:{isSave:function(e){return e.editModal.saveData},connectionInfo:function e(t){var n=t.connections,e=[];for(var l in n)null!=n[l]&&e.push(r()(["targetId","sourceId"],l.split("||")));return e},activeNodeRelationInfo:function(e){var t=e.nodeRelations,n=e.editModal.activeNode,l=[];if(n&&t[n])return function e(t,n,l){l&&n[t]&&n[t].length>0&&(n[t].forEach(function(e){return l.push(e)}),n[t].map(function(t){return e(t,n,l)}))}(n,t,l),s()(l)},nodeInfo:function(e,t){var n=e.steps,l=e.editModal.activeNode,a=t.activeNodeRelationInfo;if(l&&n[l]){var i=[];return a&&a.forEach(function(e){var t=n[e];t.outputFields&&Array.isArray(t.outputFields)&&t.outputFields.forEach(function(e){return i.push({step:t.name,name:e,stepId:t.id})})}),n[l].availableFields=i,n[l]}},kettleJson:function(e,t){var n=e.steps,l=e.name,a=e.schemeId,i=e.description,s=t.connectionInfo,o=p()(n);return{hops:s.map(function(e){return{from:e.sourceId,to:e.targetId,enabled:"y"}}),name:l,id:a,description:i,steps:o,idMapping:o.map(function(e,t){return{id:e.id,name:e.name+"-("+t+")"}})}}},mutations:{changeLabel:function(e,t){var n=e.connections,l=t.id,a=t.newId,i=t.oldId,s=t.labelId;i&&n[i+"||"+l].getOverlay(s).setLabel(""),a&&n[a+"||"+l].getOverlay(s).setLabel("11111")},saveData:function(e,t){e.editModal.saveData=t},addNode:function(e,t){var n=e.steps,l=u()(t);n[l.id]?n[l.id]=l:a.a.set(n,l.id,l)},updateXY:function(e,t){var n=t.id,l=t.left,a=t.top,i=e.steps[n];i&&(i.x=l,i.y=a)},setName:function(e,t){e.name=t},setDescription:function(e,t){e.description=t},setId:function(e,t){e.schemeId=t},removeNodeById:function(e,t){var n=e.steps,l=e.connections;a.a.delete(n,t);for(var i in l)i.lastIndexOf(t)!=-1&&jsPlumb.detach(l[i])},addConnection:function(e,t){var n=e.connections,l=t.targetId,i=t.sourceId,s=l+"||"+i;n[s]?n[s]=t:a.a.set(n,s,t)},removeConnection:function(e,t){var n=e.connections,l=t.targetId,i=t.sourceId,s=l+"||"+i;for(var o in n)o==s&&a.a.delete(n,o)},addNodeRelations:function(e,t){var n=e.nodeRelations,l=t.targetId,i=t.sourceId,s=n[l];s&&Array.isArray(s)?s.push(i):a.a.set(n,l,[i])},removeRelationById:function(e,t){var n=e.nodeRelations;for(var l in n)Array.isArray(n[l])&&n[l].forEach(function(e,n,l){e==t&&l.splice(n,1)});n[t]&&a.a.delete(n,t)},openWin:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.activeNode,l=void 0===n?"emptyStep":n,i=t.currentView,s=void 0===i?"emptyView":i,o=t.customParams;e.editModal.openWin||(e.editModal.activeNode=l,e.editModal.currentView=s,e.editModal.openWin=!0,o&&a.a.set(e.editModal,"customParams",o))},closeWin:function(e){e.editModal.openWin=!1,e.editModal.activeNode=""}},actions:{addConnection:function(e,t){var n=e.commit;n("addConnection",t),n("addNodeRelations",t)},removeConnection:function(e,t){var n=e.commit,l=t.targetId;n("removeConnection",t),n("removeRelationById",l)}}};t.a=f},4:function(e,t,n){"use strict";function l(){return{sourceList:[{name:"",id:""}],tables:[]}}function a(){return[{title:"输入",items:[{name:"表输入",type:"TableInput"},{name:"生成记录",type:"RowGenerator"},{name:"获取系统信息",type:"SystemInfo"},{name:"文件加载",type:"LoadFileInput"},{name:"xml输入",type:"getXMLData"},{name:"Json输入",type:"JsonInput"}],collapsed:!1},{title:"输出",items:[{name:"表输出",type:"TableOutput"},{name:"插入/更新",type:"InsertUpdate"},{name:"执行存储过程",type:"DBProc"},{name:"文本文件输出",type:"TextFileOutput"}],collapsed:!1},{title:"流程",items:[{name:"空操作",type:"Dummy"},{name:"过滤",type:"FilterRows"}],collapsed:!1},{title:"查询",items:[{name:"Http客户端",type:"HTTP"},{name:"Http post",type:"HTTPPOST"},{name:"Web服务",type:"WebServiceLookup"}],collapsed:!0},{title:"转换",items:[{name:"计算器",type:"Calculator"},{name:"去重",type:"Unique"},{name:"字符串替换",type:"ReplaceString"},{name:"排序",type:"SortRows"},{name:"行转列",type:"Normaliser"}],collapsed:!0},{title:"作业",items:[{name:"获取变量",type:"GetVariable"},{name:"设置变量",type:"SetVariable"}],collapsed:!0},{title:"脚本",items:[{name:"SQL脚本",type:"ExecSQL"}],collapsed:!0},{title:"检验",items:[{name:"数据检验",type:"Validator"}],collapsed:!0}]}var i=n(109),s=n.n(i);t.e=l,t.a=a,n.d(t,"b",function(){return o}),n.d(t,"d",function(){return r}),n.d(t,"c",function(){return c});var o={Dummy:function(e){var t={type:"Dummy",typeDesc:"空操作"};return this.__common__(t,e)},TableInput:function(e){var t={type:"TableInput",typeDesc:"表输入",connection:null,sql:null,limit:0,execute_each_row:null,variables_active:null,lazy_conversion_active:null,ext:{tables:[],joins:[{parent:"",client:"",joinType:"INNER JOIN",conditions:[{field:"",cndType:"=",value:"",index:0}],logic:"#0"}],jointype:["INNER JOIN","LEFT JOIN","RIGHT JOIN"],conditiontype:["=","<>","<",">","<=",">="]}};return this.__common__(t,e)},TableOutput:function(e){var t={type:"TableOutput",typeDesc:"表输出",connection:"",schema:"",table:"",commit:1e3,truncate:"N",ignore_errors:"N",use_batch:"Y",specify_fields:"Y",partitioning_enabled:"N",partitioning_field:"",partitioning_daily:"N",partitioning_monthly:"Y",tablename_in_field:"N",tablename_field:"",tablename_in_table:"Y",return_keys:"N",return_field:""};return this.__common__(t,e)},FilterRows:function(e){var t={type:"FilterRows",typeDesc:"过滤",send_true_to:"",send_false_to:"",negated:"N",conditions:[]};return this.__common__(t,e)},Unique:function(e){var t={type:"Unique",typeDesc:"去重",count_rows:"N",count_field:"",reject_duplicate_row:"N",error_description:""};return this.__common__(t,e)},ReplaceString:function(e){var t={type:"ReplaceString",typeDesc:"字符串替换"};return this.__common__(t,e)},SortRows:function(e){var t={type:"SortRows",typeDesc:"排序"};return this.__common__(t,e)},GetVariable:function(e){var t={type:"GetVariable",typeDesc:"获取变量"};return this.__common__(t,e)},Normaliser:function(e){var t={type:"Normaliser",typeDesc:"列转行",typefield:""};return this.__common__(t,e)},SetVariable:function(e){var t={type:"SetVariable",typeDesc:"设置变量",use_formatting:"Y"};return this.__common__(t,e)},ExecSQL:function(e){var t={type:"ExecSQL",typeDesc:"执行SQL脚本",connection:"",sql:"",insert_field:"",update_field:"",delete_field:"",read_field:""};return this.__common__(t,e)},Calculator:function(e){var t={type:"Calculator",typeDesc:"计算器"};return this.__common__(t,e)},RowGenerator:function(e){var t={type:"RowGenerator",typeDesc:"生成记录",limit:10};return this.__common__(t,e)},SystemInfo:function(e){var t={type:"SystemInfo",typeDesc:"获取系统信息"};return this.__common__(t,e)},InsertUpdate:function(e){var t={type:"InsertUpdate",typeDesc:"插入/更新",connection:"",update_bypassed:"",table:"",commit:100,queryList:[],updateList:[]};return this.__common__(t,e)},Validator:function(e){var t={type:"Validator",typeDesc:"数据检验",send_false_to:"",validate_all:"N",concat_errors:"N",concat_separator:""};return this.__common__(t,e)},WebServiceLookup:function(e){var t={type:"WebServiceLookup",typeDesc:"Web服务",wsURL:"",wsOperation:"",wsOperationNamespace:"",wsOperationRequest:"",proxyHost:"",proxyPort:"",httpLogin:"",httpPassword:"",callStep:1,passingInputData:"Y",compatible:"N",repeating_element:"",reply_as_string:"N",fieldsInList:[],fieldsOutList:[]};return this.__common__(t,e)},HTTP:function(e){var t={type:"HTTP",typeDesc:"Http Client",url:"",urlInField:"N",urlField:"",encoding:"UTF-8",httpLogin:"",httpPassword:"",proxyHost:"",proxyPort:"",socketTimeout:1e4,connectionTimeout:1e4,closeIdleConnectionsTime:-1,paramList:[],headerList:[],result:{name:"result",code:"",response_time:"",response_header:""}};return this.__common__(t,e)},HTTPPOST:function(e){var t={type:"HTTPPOST",typeDesc:"Http Post",url:"",urlInField:"N",urlField:"",encoding:"UTF-8",httpLogin:"",httpPassword:"",proxyHost:"",proxyPort:"",socketTimeout:1e4,connectionTimeout:1e4,closeIdleConnectionsTime:-1,argList:[],queryList:[],postafile:"N",requestEntity:"",result:{name:"result",code:"",response_time:"",response_header:""}};return this.__common__(t,e)},LoadFileInput:function(e){var t={type:"LoadFileInput",typeDesc:"文件加载",fileName:"",filemask:"",exclude_filemask:"",file_required:"N",include_subfolders:"N",isInFields:"N",dynamicFilenameField:""};return this.__common__(t,e)},JsonInput:function(e){var t={type:"JsonInput",typeDesc:"Json 输入",isAFile:"N",readurl:"N",valueField:""};return this.__common__(t,e)},getXMLData:function(e){var t={type:"getXMLData",typeDesc:"Xml 输入",readurl:"N",isAFile:"N",xmlField:"",loopxpath:""};return this.__common__(t,e)},TextFileOutput:function(e){var t={type:"TextFileOutput",typeDesc:"文本文件输出",separator:";",enclosure:'"',enclosure_forced:"N",header:"N",footer:"N",format:"DOS",fileNameInField:"N",fileNameField:"",file:{name:"",extention:"TXT",add_date:"N",add_time:"N"}};return this.__common__(t,e)},DBProc:function(e){var t={type:"DBProc",typeDesc:"执行存储过程",result_name:"",result_type:"String",auto_commit:"Y",procedure:"",connection:""};return this.__common__(t,e)},__common__:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t._num,l=void 0===n?0:n,a=t.name,i=void 0===a?"":a,o=t.x,r=void 0===o?0:o,c=t.y,u=void 0===c?0:c,d=t.id,p=void 0===d?(new Date).getTime():d;return s()({},e,{name:i,x:r,y:u,id:p,availableFields:[],_num:l,outputFields:[],fields:[]})}},r={ReplaceString:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.edit,n=void 0!==t&&t,l=e.in_stream_name,a=void 0===l?"":l,i=e.out_stream_name,s=void 0===i?"":i,o=e.use_regex,r=void 0===o?"no":o,c=e.replace_string,u=void 0===c?"":c,d=e.replace_by_string,p=void 0===d?"":d,f=e.set_empty_string,m=void 0===f?"N":f,v=e.replace_field_by_string,_=void 0===v?"":v,b=e.whole_word,h=void 0===b?"no":b,w=e.case_sensitive,y=void 0===w?"no":w;return{edit:n,in_stream_name:a,out_stream_name:s,use_regex:r,replace_string:u,replace_by_string:p,set_empty_string:m,replace_field_by_string:_,whole_word:h,case_sensitive:y}},SortRows:function(e){var t=e.edit,n=void 0!==t&&t,l=e.name,a=void 0===l?"":l,i=e.case_sensitive,s=void 0===i?"N":i,o=e.ascending,r=void 0===o?"N":o;return{edit:n,name:a,case_sensitive:s,ascending:r}},FilterRows:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.edit,n=void 0!==t&&t,l=e.negated,a=void 0===l?"N":l,i=e.leftvalue,s=void 0===i?"":i,o=e.func,r=void 0===o?"":o,c=e.rightvalue,u=void 0===c?"":c,d=e.operator,p=void 0===d?"OR":d,f=e.value;f=void 0===f?{}:f;var m=f.name,v=void 0===m?"constant":m,_=f.type,b=void 0===_?"String":_,h=f.text,w=void 0===h?"":h,y=f.length,x=void 0===y?"-1":y,k=f.precision,g=void 0===k?"-1":k,S=f.isnull,$=void 0===S?"N":S,F=f.mask,T=void 0===F?"":F;return{edit:n,negated:a,leftvalue:s,function:r,rightvalue:u,operator:p,value:{name:v,mask:T,type:b,text:w,length:x,precision:g,isnull:$}}},Unique:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.edit,n=void 0!==t&&t,l=e.name,a=void 0===l?"":l,i=e.case_insensitive,s=void 0===i?"Y":i;return{edit:n,name:a,case_insensitive:s}},GetVariable:function(e){var t=e.edit,n=void 0!==t&&t,l=e.name,a=void 0===l?"":l,i=e.variable,s=void 0===i?"":i,o=e.type,r=void 0===o?"String":o;return{edit:n,name:a,variable:s,type:r}},Normaliser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.edit,n=void 0!==t&&t,l=e.name,a=void 0===l?"":l,i=e.value,s=void 0===i?"":i,o=e.norm,r=void 0===o?"":o;return{edit:n,name:a,value:s,norm:r}},SetVariable:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.edit,n=void 0!==t&&t,l=e.field_name,a=void 0===l?"":l,i=e.variable_name,s=void 0===i?"":i,o=e.variable_type,r=void 0===o?"JVM":o,c=e.default_value,u=void 0===c?"":c;return{edit:n,field_name:a,variable_name:s,variable_type:r,default_value:u}},ExecSQL:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.edit,n=void 0!==t&&t,l=e.name,a=void 0===l?"":l;return{edit:n,name:a}},Calculator:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.edit,n=void 0!==t&&t,l=e.field_name,a=void 0===l?"":l,i=e.calc_type,s=void 0===i?"":i,o=e.field_a,r=void 0===o?"":o,c=e.field_b,u=void 0===c?"":c,d=e.field_c,p=void 0===d?"":d,f=e.value_type,m=void 0===f?"":f;return{edit:n,field_a:r,field_b:u,field_c:p,field_name:a,value_type:m,calc_type:s}},RowGenerator:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.edit,n=void 0!==t&&t,l=e.name,a=void 0===l?"":l,i=e.type,s=void 0===i?"String":i,o=e.set_empty_string,r=void 0===o?"N":o,c=e.nullif,u=void 0===c?"":c;return{edit:n,name:a,type:s,set_empty_string:r,nullif:u}},SystemInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.edit,n=void 0!==t&&t,l=e.name,a=void 0===l?"":l,i=e.type,s=void 0===i?"":i;return{edit:n,name:a,type:s}},InsertUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.edit,n=void 0!==t&&t,l=e.name,a=void 0===l?"":l,i=e.type,s=void 0===i?"query":i,o=e.rename,r=void 0===o?"":o,c=e.update,u=void 0===c?"Y":c,d=e.name2,p=void 0===d?"":d,f=e.condition,m=void 0===f?"=":f,v=e.field,_=void 0===v?"":v;return"update"==s?{edit:n,name:a,rename:r,update:u}:{edit:n,name:a,name2:p,condition:m,field:_}},Validator:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.validation_name,n=void 0===t?"":t;return this.__common__({name:"",validation_name:n,max_length:"",min_length:"",null_allowed:"Y",conversion_mask:"",decimal_symbol:"",grouping_symbol:"",only_null_allowed:"N",only_numeric_allowed:"N",data_type:"None",data_type_verified:"N",max_value:"",min_value:"",start_string:"",end_string:"",start_string_not_allowed:"",end_string_not_allowed:"",regular_expression:"",regular_expression_not_allowed:"",error_code:"",error_description:"",is_sourcing_values:"N",sourcing_step:"",sourcing_field:"",allowed_value:""},e)},HTTP:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.edit,n=void 0!==t&&t,l=e.name,a=void 0===l?"":l,i=e.parameter,s=void 0===i?"":i;return{edit:n,name:a,parameter:s}},HTTPPOST:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.edit,n=void 0!==t&&t,l=e.name,a=void 0===l?"":l,i=e.parameter,s=void 0===i?"":i,o=e.header,r=void 0===o?"N":o,c=e.type,u=void 0===c?"query":c;return"arg"==u?{edit:n,name:a,parameter:s,header:r}:{edit:n,name:a,parameter:s}},WebServiceLookup:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.edit,n=void 0!==t&&t,l=e.name,a=void 0===l?"":l,i=e.wsName,s=void 0===i?"":i,o=e.xsdType,r=void 0===o?"":o;return{edit:n,name:a,wsName:s,xsdType:r}},LoadFileInput:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.edit,n=void 0!==t&&t,l=e.name,a=void 0===l?"":l,i=e.element_type,s=void 0===i?"":i,o=e.type,r=void 0===o?"":o,c=e.trim_type,u=void 0===c?"":c;return{edit:n,name:a,element_type:s,type:r,trim_type:u}},JsonInput:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.edit,n=void 0!==t&&t,l=e.name,a=void 0===l?"":l,i=e.path,s=void 0===i?"":i,o=e.type,r=void 0===o?"":o,c=e.length,u=void 0===c?"":c,d=e.precision,p=void 0===d?"":d,f=e.trim_type,m=void 0===f?"":f;return{edit:n,name:a,path:s,type:r,length:u,precision:p,trim_type:m}},getXMLData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.edit,n=void 0!==t&&t,l=e.name,a=void 0===l?"":l,i=e.xpath,s=void 0===i?"":i,o=e.element_type,r=void 0===o?"node":o,c=e.result_type,u=void 0===c?"valueof":c,d=e.type,p=void 0===d?"":d,f=e.trim_type,m=void 0===f?"none":f;return{edit:n,name:a,xpath:s,element_type:r,result_type:u,type:p,trim_type:m}},TextFileOutput:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.edit,n=void 0!==t&&t,l=e.name,a=void 0===l?"":l,i=e.type,s=void 0===i?"":i,o=e.format,r=void 0===o?"":o,c=e.trim_type,u=void 0===c?"none":c;return{edit:n,name:a,type:s,format:r,trim_type:u}},DBProc:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.edit,n=void 0!==t&&t,l=e.name,a=void 0===l?"":l,i=e.direction,s=void 0===i?"OUT":i,o=e.type,r=void 0===o?"String":o;return{edit:n,name:a,type:r,direction:s}},__common__:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t._num,l=void 0===n?0:n,a=t.edit,i=void 0!==a&&a;return s()({_num:l,edit:i},e)}},c={func:[{label:">"},{label:">="},{label:"<="},{label:"="},{label:"<>"},{label:"<"},{label:"REGEXP"},{label:"IS NULL"},{label:"IS NOT NULL"},{label:"CONTAINS"},{label:"STARTS WITH"},{label:"ENDS WITH"},{label:"LIKE"},{label:"TRUE"},{label:"IN LIST"}],inputTypes:["String","Timestamp","Integer","Number","BigNumber","Date","Binary","Boolean","Internet Address"],format:{Number:["#,##0.###","0.00","#","#.#","###,###,###.# "],Date:["yyyy/MM/dd HH:mm:ss","yyyy/MM/dd HH:mm:ss.SSS","yyyy/MM/dd"]},operators:["OR","OR NOT","XOR","AND","AND NOT"],variableType:[{value:"JVM",name:"JVM"},{value:"PARENT_JOB",name:"PARENT_JOB"},{value:"GP_JOB",name:"Grand_PARENTJOB"},{value:"ROOT_JOB",name:"ROOT_JOB"}],calcType:[{value:"ADD",name:"A + B"},{value:"SUBTRACT",name:"A - B"},{value:"MULTIPLY",name:"A * B"},{value:"DIVIDE",name:"A / B"}],sysDataType:[{value:"system date (variable)",name:"系统日期 (可变)"},{value:"system date (fixed)",name:"系统日期 (固定)"},{value:"yesterday start",name:"昨天 00:00:00"},{value:"yesterday end",name:"昨天 23:59:59"},{value:"today start",name:"今天 00:00:00"},{value:"today end",name:"今天 23:59:59"},{value:"tomorrow start",name:"明天 00:00:00"},{value:"tomorrow end",name:"明天 23:59:59"},{value:"last month start",name:"上月第一天的 00:00:00"},{value:"last month end",name:"上月最后一天的 23:59:59"},{value:"this month start",name:"本月第一天的 00:00:00"},{value:"this month end",name:"本月最后一天的  23:59:59"},{value:"next month start",name:"下个月第一天的 00:00:00"},{value:"next month end",name:"下个月最后一天的 23:59:59"},{value:"last week start",name:"LastWeekStart"},{value:"last week end",name:"LastWeekEnd"},{value:"last week open end",name:"LastWeekOpenEnd"},{value:"this week start",name:"ThisWeekStart"},{value:"this week end",name:"ThisWeekEnd"},{value:"this week open end",name:"ThisWeekOpenEnd"},{value:"next week start",name:"NextWeekStart"},{value:"next week end",name:"NextWeekEnd"},{value:"next week open end",name:"NextWeekOpenEnd"},{value:"prev quarter start",name:"PrevQuarterStart"},{value:"prev quarter end",name:"PrevQuarterEnd"},{value:"this quarter start",name:"ThisQuarterStart"},{value:"this quarter end",name:"ThisQuarterEnd"},{value:"next quarter start",name:"NextQuarterStart"},{value:"next quarter end",name:"NextQuarterEnd"},{value:"prev year start",name:"PrevYearStart"},{value:"prev year end",name:"PrevYearEnd"},{value:"this year start",name:"ThisYearStart"},{value:"this year end",name:"ThisYearEnd"},{value:"next year start",name:"NextYearStart"},{value:"next year end",name:"NextYearEnd"}],whereCondition:["=","<>","<","<=",">",">=","LIKE","BETWEEN","IS NULL","IS NOT NULL"],trimType:[{name:"不去除",value:"none"},{name:"去除左空格",value:"left"},{name:"去除右空格",value:"right"},{name:"去除左右空格",value:"both"}],directions:[{name:"输出",value:"OUT"},{name:"输入",value:"IN"},{name:"输入/输出",value:"INOUT"}]}},57:function(e,t,n){"use strict";var l=n(281),a=n.n(l),i=void 0;i=context,t.a={requestSourceList:function(){return a.a.get(i+"/etl/dataSource/getDs.do")},requestSourceInstanceById:function(e){if(e)return a.a.get(i+"/dbMeta/table/queryAllTableByDSID.do",{params:{dsid:e}})},tableInputGetSql:function(e,t){return a.a.post(i+"/TableInput/buildSql.do",{joins:e,dsid:t})},tableInputGetSimpleSql:function(e,t){return a.a.post(i+"/TableInput/buildSimpleSql.do",{table:e,dsid:t})},saveTransformation:function(e){var t="";return t=""===e.id?"/trans/save.do":"/trans/update.do",a.a.post(i+t,e)},requestSavingStepsFromServer:function(e){return a.a.get(i+"/trans/open.do",{params:{id:e}})},nameExistCheck:function(e,t){return a.a.get(i+"/trans/nameExistCheck.do",{params:{name:e,id:t}})},testSql:function(e,t){var n=a.a.create({timeout:1e4});return n.post(i+"/TableInput/getSQLMeta.do",{Sql:e,dsId:t})},webServiceAnalysis:function(e){var t=e.url,n=e.user,l=void 0===n?"":n,s=e.password,o=void 0===s?"":s;return a.a.get(i+"/WebService/loadWdsl.do",{params:{url:t,user:l,password:o}})}}},573:function(e,t){},574:function(e,t){},575:function(e,t){},576:function(e,t){},577:function(e,t){},578:function(e,t){},579:function(e,t){},580:function(e,t){},581:function(e,t){},582:function(e,t){},583:function(e,t){},584:function(e,t){},585:function(e,t){},586:function(e,t){},587:function(e,t){},588:function(e,t){},589:function(e,t){},590:function(e,t){},591:function(e,t){},592:function(e,t){},593:function(e,t){},594:function(e,t){},595:function(e,t){},7:function(e,t,n){"use strict";var l=n(80),a=n(164),i=n.n(a),s=n(4);t.a={mounted:function(){this.step=i()(this.$store.getters.nodeInfo),this.$emit("ModalOpened",this.customParams)},store:l.a,destroyed:function(){this.$store.getters.isSave&&(this.updateFields&&this.updateFields(),this.$store.commit("addNode",this.step))},computed:{nextSteps:function(){var e=[],t=this.step.id,n=this.$store.state.step.steps;for(var l in this.$store.state.step.connections)l.endsWith(t)&&e.push(l.split("||")[0]);return e.map(function(e){return{name:n[e].name,id:e}})}},data:function(){return{rules:{name:function(e,t,n,l,a){var i=[];/.*([\\*#.^!$&+]).*/.test(t)&&i.push(new Error("名称中不能包含下列特殊字符 \\、*、#、.、^、!、$、&、+")),n(i)}}}},methods:{warning:function(e){this.$message({message:e,type:"warning"})},notify:function(e){this.$notify({title:"警告",message:e,type:"warning"})},success:function(e){this.$message({message:e,type:"success"})},confirm:function(e,t){this.$msgbox({title:"提示",message:e,showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){"confirm"===e&&t()})},handleDelete:function(e,t,n){n&&Array.isArray(n)?n.splice(e,1):this.step.fields.splice(e,1)},_addRecord:function(){var e=this.step.type;e&&this.step.fields.push(s.d[e]({edit:!1}))},reverseEditState:function(e,t){t.edit=!t.edit},beforeSave:function(e){var t=this.$refs.form;t&&t.validate(function(t){t&&e.call()})}}}},712:function(e,t,n){n(594),n(595);var l=n(2)(n(300),n(776),"data-v-fd2bbcb0",null);e.exports=l.exports},713:function(e,t,n){var l=n(2)(n(301),n(753),null,null);e.exports=l.exports},714:function(e,t,n){n(580);var l=n(2)(n(303),n(750),"data-v-15480ad0",null);e.exports=l.exports},715:function(e,t,n){var l=n(2)(n(304),n(762),null,null);e.exports=l.exports},716:function(e,t,n){n(575);var l=n(2)(n(305),n(745),null,null);e.exports=l.exports},717:function(e,t,n){var l=n(2)(n(306),n(775),null,null);e.exports=l.exports},718:function(e,t,n){n(581);var l=n(2)(n(307),n(751),"data-v-1a83a8b6",null);e.exports=l.exports},719:function(e,t,n){var l=n(2)(n(308),n(764),null,null);e.exports=l.exports},720:function(e,t,n){var l=n(2)(n(309),n(761),null,null);e.exports=l.exports},721:function(e,t,n){n(574);var l=n(2)(n(310),n(744),"data-v-051ae733",null);e.exports=l.exports},722:function(e,t,n){n(577);var l=n(2)(n(311),n(747),"data-v-08e5b8f0",null);e.exports=l.exports},723:function(e,t,n){n(587);var l=n(2)(n(312),n(767),"data-v-8311e4e0",null);e.exports=l.exports},724:function(e,t,n){n(593);var l=n(2)(n(313),n(774),null,null);e.exports=l.exports},725:function(e,t,n){var l=n(2)(n(314),n(752),null,null);e.exports=l.exports},726:function(e,t,n){var l=n(2)(n(315),n(763),null,null);e.exports=l.exports},727:function(e,t,n){var l=n(2)(n(316),n(757),null,null);e.exports=l.exports},728:function(e,t,n){n(576);var l=n(2)(n(317),n(746),"data-v-07c9bfe6",null);e.exports=l.exports},729:function(e,t,n){n(591);var l=n(2)(n(318),n(772),null,null);e.exports=l.exports},730:function(e,t,n){var l=n(2)(n(319),n(766),null,null);e.exports=l.exports},731:function(e,t,n){n(583);var l=n(2)(n(320),n(755),null,null);e.exports=l.exports},732:function(e,t,n){n(582);var l=n(2)(n(321),n(754),null,null);e.exports=l.exports},733:function(e,t,n){n(586);var l=n(2)(n(322),n(759),"data-v-2bf71b24",null);e.exports=l.exports},734:function(e,t,n){n(588);var l=n(2)(n(323),n(768),"data-v-920fd4d2",null);e.exports=l.exports},735:function(e,t,n){var l=n(2)(n(324),n(765),null,null);e.exports=l.exports},736:function(e,t,n){var l=n(2)(n(325),n(770),null,null);e.exports=l.exports},737:function(e,t,n){var l=n(2)(n(326),n(760),null,null);e.exports=l.exports},738:function(e,t,n){n(589);var l=n(2)(n(327),n(769),"data-v-96a9beba",null);e.exports=l.exports},739:function(e,t,n){n(585);var l=n(2)(n(328),n(758),null,null);e.exports=l.exports},740:function(e,t,n){n(592);var l=n(2)(n(329),n(773),"data-v-cf1afc4a",null);e.exports=l.exports},741:function(e,t,n){n(579);var l=n(2)(n(330),n(749),"data-v-1217df67",null);e.exports=l.exports},742:function(e,t,n){n(578);var l=n(2)(n(331),n(748),"data-v-0f8f47bb",null);e.exports=l.exports},743:function(e,t,n){n(590);var l=n(2)(n(332),n(771),null,null);e.exports=l.exports},744:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-tabs",{staticStyle:{width:"760px"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"基本设置",name:"first"}},[n("el-form",{ref:"form",attrs:{rules:e.rules,model:e.step,"label-width":"150px"}},[n("el-form-item",{attrs:{label:"步骤名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入步骤名称"},model:{value:e.step.name,callback:function(t){e.$set(e.step,"name",t)},expression:"step.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"xml源为URL?"}},[n("el-checkbox",{attrs:{"true-label":"Y","false-label":"N"},model:{value:e.step.readurl,callback:function(t){e.$set(e.step,"readurl",t)},expression:"step.readurl"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"xml源为文件路径?"}},[n("el-checkbox",{attrs:{"true-label":"Y","false-label":"N"},model:{value:e.step.isAFile,callback:function(t){e.$set(e.step,"isAFile",t)},expression:"step.isAFile"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"xml源"}},[n("el-select",{model:{value:e.step.xmlField,callback:function(t){e.$set(e.step,"xmlField",t)},expression:"step.xmlField"}},e._l(e.step.availableFields,function(e){return n("el-option",{attrs:{value:e.name}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"xml元素循环路径"}},[n("el-input",{model:{value:e.step.loopxpath,callback:function(t){e.$set(e.step,"loopxpath",t)},expression:"step.loopxpath"}})],1)],1)],1),e._v(" "),n("el-tab-pane",{attrs:{label:"参数设置",name:"second"}},[n("el-form",{ref:"form2",attrs:{"label-width":"150px"}},[n("el-button",{attrs:{icon:"plus"},on:{click:e._addRecord}},[e._v("添加字段")]),e._v(" "),n("br"),n("br"),e._v(" "),n("el-table",{attrs:{data:e.step.fields,stripe:"",border:"","max-height":300}},[n("el-table-column",{attrs:{label:"名称",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-input",{attrs:{size:"mini"},model:{value:t.row.name,callback:function(n){e.$set(t.row,"name",n)},expression:"scope.row.name"}})],1):n("div",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"xml路径",width:140},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-input",{attrs:{size:"mini"},model:{value:t.row.xpath,callback:function(n){e.$set(t.row,"xpath",n)},
expression:"scope.row.xpath"}})],1):n("div",[e._v(e._s(t.row.xpath))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"节点",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-select",{attrs:{size:"mini"},model:{value:t.row.element_type,callback:function(n){e.$set(t.row,"element_type",n)},expression:"scope.row.element_type"}},[n("el-option",{attrs:{value:"attribut",label:"属性"}}),e._v(" "),n("el-option",{attrs:{value:"node",label:"节点"}})],1)],1):n("div",[e._v(e._s(t.row.element_type))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"结果类型",width:130},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-select",{attrs:{size:"mini"},model:{value:t.row.result_type,callback:function(n){e.$set(t.row,"result_type",n)},expression:"scope.row.result_type"}},[n("el-option",{attrs:{value:"valueof",label:"ValueOf"}}),e._v(" "),n("el-option",{attrs:{value:"singlenode",label:"SingleNode"}})],1)],1):n("div",[e._v(e._s(t.row.result_type))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"数据类型",width:140},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-select",{attrs:{size:"mini"},model:{value:t.row.type,callback:function(n){e.$set(t.row,"type",n)},expression:"scope.row.type"}},e._l(e.options.types,function(e){return n("el-option",{attrs:{value:e}})}))],1):n("div",[e._v(e._s(t.row.type))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"去空格",width:130},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-select",{attrs:{size:"mini"},model:{value:t.row.trim_type,callback:function(n){e.$set(t.row,"trim_type",n)},expression:"scope.row.trim_type"}},e._l(e.options.trimType,function(e){return n("el-option",{attrs:{value:e.value,label:e.name}})}))],1):n("div",[e._v(e._s(t.row.trim_type))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"控制",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(n){e.reverseEditState(t.$index,t.row)}}},[e._v("编辑\n\n\n                  ")])],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){e.handleDelete(t.$index)}}},[e._v("\n                    删除\n\n                  ")])],1)],1)]}}])})],1)],1)],1)],1)],1)},staticRenderFns:[]}},745:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{ref:"form",attrs:{model:e.step,"label-width":"100px",rules:e.rules}},[n("el-form-item",{attrs:{label:"步骤名称",prop:"name"}},[n("el-input",{staticStyle:{width:"550px"},model:{value:e.step.name,callback:function(t){e.$set(e.step,"name",t)},expression:"step.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"数据源选择"}},[n("el-form-item",{attrs:{prop:"connection"}},[n("el-select",{staticStyle:{width:"550px"},attrs:{placeholder:"目标数据源"},model:{value:e.step.connection,callback:function(t){e.$set(e.step,"connection",t)},expression:"step.connection"}},e._l(e.dataSourceList,function(t){return n("el-option",{attrs:{label:t.name,value:t.id}},[n("span",{staticStyle:{float:"left"}},[e._v(e._s(t.name))]),e._v(" "),n("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.type))])])}))],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"存储过程名称"}},[n("el-input",{staticStyle:{width:"550px"},model:{value:e.step.procedure,callback:function(t){e.$set(e.step,"procedure",t)},expression:"step.procedure"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"返回值名称"}},[n("el-input",{staticStyle:{width:"39%","margin-right":"20px"},model:{value:e.step.result_name,callback:function(t){e.$set(e.step,"result_name",t)},expression:"step.result_name"}}),e._v("\n      返回值类型\n      "),n("el-select",{model:{value:e.step.result_type,callback:function(t){e.$set(e.step,"result_type",t)},expression:"step.result_type"}})],1),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.fetchFields}},[e._v("获取字段")]),e._v(" "),n("el-button",{attrs:{icon:"plus"},on:{click:e._addRecord}}),e._v(" "),n("br"),n("br"),e._v(" "),n("el-table",{attrs:{data:e.step.fields,stripe:"","max-height":300}},[n("el-table-column",{attrs:{label:"名称",width:140},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-autocomplete",{attrs:{placeholder:"名称","fetch-suggestions":e.querySearch},model:{value:t.row.name,callback:function(n){e.$set(t.row,"name",n)},expression:"scope.row.name"}})],1):n("div",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"方向",width:140},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-select",{attrs:{size:"small"},model:{value:t.row.direction,callback:function(n){e.$set(t.row,"direction",n)},expression:"scope.row.direction"}},e._l(e.options.directions,function(e){return n("el-option",{attrs:{label:e.name,value:e.value}})}))],1):n("div",[e._v(e._s(t.row.direction))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"类型",width:160},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-select",{attrs:{size:"small"},model:{value:t.row.type,callback:function(n){e.$set(t.row,"type",n)},expression:"scope.row.type"}},e._l(e.options.types,function(e){return n("el-option",{attrs:{value:e}})}))],1):n("div",[e._v(e._s(t.row.type))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作","class-name":"table-row",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(n){e.reverseEditState(t.$index,t.row)}}},[e._v("编辑")])],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])],1)],1)]}}])})],1)],1)],1)},staticRenderFns:[]}},746:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{ref:"form",attrs:{rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"步骤名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"步骤名称"},model:{value:e.step.name,callback:function(t){e.$set(e.step,"name",t)},expression:"step.name"}})],1),e._v(" "),n("br"),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.fetchFieldsFromInput}},[e._v("获取字段")]),e._v(" "),n("el-button",{attrs:{icon:"plus"},on:{click:e._addRecord}}),e._v(" "),n("br"),n("br"),e._v(" "),n("el-table",{attrs:{data:e.step.fields,stripe:"",border:"","max-height":400}},[n("el-table-column",{attrs:{label:"输入流字段",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-select",{model:{value:t.row.in_stream_name,callback:function(n){e.$set(t.row,"in_stream_name",n)},expression:"scope.row.in_stream_name"}},e._l(e.step.availableFields,function(e){return n("el-option",{attrs:{value:e.name}})}))],1):n("div",[e._v(e._s(t.row.in_stream_name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"输出流字段",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-input",{model:{value:t.row.out_stream_name,callback:function(n){e.$set(t.row,"out_stream_name",n)},expression:"scope.row.out_stream_name"}})],1):n("div",[e._v(e._s(t.row.out_stream_name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"使用正则表达式",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-select",{model:{value:t.row.use_regex,callback:function(n){e.$set(t.row,"use_regex",n)},expression:"scope.row.use_regex"}},[n("el-option",{attrs:{value:"yes"}}),e._v(" "),n("el-option",{attrs:{value:"no"}})],1)],1):n("div",[e._v(e._s(t.row.use_regex))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"搜索",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-input",{model:{value:t.row.replace_string,callback:function(n){e.$set(t.row,"replace_string",n)},expression:"scope.row.replace_string"}})],1):n("div",[e._v(e._s(t.row.replace_string))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"使用...替换",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-input",{model:{value:t.row.replace_by_string,callback:function(n){e.$set(t.row,"replace_by_string",n)},expression:"scope.row.replace_by_string"}})],1):n("div",[e._v(e._s(t.row.replace_by_string))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"设置为空串",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-select",{model:{value:t.row.set_empty_string,callback:function(n){e.$set(t.row,"set_empty_string",n)},expression:"scope.row.set_empty_string"}},[n("el-option",{attrs:{value:"Y"}}),e._v(" "),n("el-option",{attrs:{value:"N"}})],1)],1):n("div",[e._v(e._s(t.row.set_empty_string))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"使用字段值替换",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-select",{model:{value:t.row.replace_field_by_string,callback:function(n){e.$set(t.row,"replace_field_by_string",n)},expression:"scope.row.replace_field_by_string"}},e._l(e.step.availableFields,function(e){return n("el-option",{attrs:{value:e.name}})}))],1):n("div",[e._v(e._s(t.row.replace_field_by_string))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"整个单词匹配",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-select",{model:{value:t.row.whole_word,callback:function(n){e.$set(t.row,"whole_word",n)},expression:"scope.row.whole_word"}},[n("el-option",{attrs:{value:"yes"}}),e._v(" "),n("el-option",{attrs:{value:"no"}})],1)],1):n("div",[e._v(e._s(t.row.whole_word))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"大小写敏感",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-select",{model:{value:t.row.case_sensitive,callback:function(n){e.$set(t.row,"case_sensitive",n)},expression:"scope.row.case_sensitive"}},[n("el-option",{attrs:{value:"yes"}}),e._v(" "),n("el-option",{attrs:{value:"no"}})],1)],1):n("div",[e._v(e._s(t.row.case_sensitive))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"控制",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"small",type:"info"},on:{click:function(n){e.reverseEditState(t.$index,t.row)}}},[e._v("编辑")])],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(n){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])],1)],1)]}}])})],1)],1)},staticRenderFns:[]}},747:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-tabs",{staticStyle:{width:"581px"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"基本设置",name:"first"}},[n("el-form",{ref:"form",attrs:{rules:e.rules,model:e.step,"label-width":"150px"}},[n("el-form-item",{attrs:{label:"步骤名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入步骤名称"},model:{value:e.step.name,callback:function(t){e.$set(e.step,"name",t)},expression:"step.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"URL"}},[n("el-input",{attrs:{disabled:"Y"==e.step.urlInField},model:{value:e.step.url,callback:function(t){e.$set(e.step,"url",t)},expression:"step.url"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"从字段中获取URL?"}},[n("el-checkbox",{attrs:{"true-label":"Y","false-label":"N"},model:{value:e.step.urlInField,callback:function(t){e.$set(e.step,"urlInField",t)},expression:"step.urlInField"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"URL字段名"}},[n("el-select",{attrs:{disabled:"N"==e.step.urlInField},model:{value:e.step.urlField,callback:function(t){e.$set(e.step,"urlField",t)},expression:"step.urlField"}},e._l(e.step.availableFields,function(e){return n("el-option",{attrs:{value:e.name}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"connection超时"}},[n("el-input-number",{attrs:{min:0,step:500},model:{value:e.step.connectionTimeout,callback:function(t){e.$set(e.step,"connectionTimeout",t)},expression:"step.connectionTimeout"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"socket超时 "}},[n("el-input-number",{attrs:{min:0,step:500},model:{value:e.step.socketTimeout,callback:function(t){e.$set(e.step,"socketTimeout",t)},expression:"step.socketTimeout"}})],1)],1)],1),e._v(" "),n("el-tab-pane",{attrs:{label:"参数设置",name:"second"}},[n("el-form",{ref:"form2",attrs:{"label-width":"150px"}},[n("el-button",{attrs:{icon:"plus"},on:{click:e.addQueryParam}},[e._v("添加请求参数")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.step.paramList=e.fetchFromInputStream()}}},[e._v("获取字段")]),e._v(" "),n("br"),n("br"),e._v(" "),n("el-table",{attrs:{data:e.step.paramList,stripe:"",border:"","max-height":250}},[n("el-table-column",{attrs:{type:"index",width:60}}),e._v(" "),n("el-table-column",{attrs:{label:"名称",width:190},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-select",{model:{value:t.row.name,callback:function(n){e.$set(t.row,"name",n)},expression:"scope.row.name"}},e._l(e.step.availableFields,function(e){return n("el-option",{attrs:{value:e.name}})}))],1):n("div",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"命名参数",width:190},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",{staticClass:"control"},[n("el-input",{model:{value:t.row.parameter,callback:function(n){e.$set(t.row,"parameter",n)},expression:"scope.row.parameter"}})],1):n("div",[e._v(e._s(t.row.parameter))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"控制",width:140},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"small",type:"info"},on:{click:function(n){e.reverseEditState(t.$index,t.row)}}},[e._v("编辑")])],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(n){e.handleDelete(t.$index,t.row,e.step.paramList)}}},[e._v("删除")])],1)],1)]}}])})],1),e._v(" "),n("br"),n("br"),e._v(" "),n("el-button",{attrs:{icon:"plus"},on:{click:e.addQueryHeader}},[e._v("添加请求头")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.step.headerList=e.fetchFromInputStream()}}},[e._v("获取字段")]),e._v(" "),n("br"),n("br"),e._v(" "),n("el-table",{attrs:{data:e.step.headerList,stripe:"",border:"","max-height":250}},[n("el-table-column",{attrs:{type:"index",width:60}}),e._v(" "),n("el-table-column",{attrs:{label:"名称",width:190},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-select",{model:{value:t.row.name,callback:function(n){e.$set(t.row,"name",n)},expression:"scope.row.name"}},e._l(e.step.availableFields,function(e){return n("el-option",{attrs:{value:e.name}})}))],1):n("div",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"命名参数",width:190},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",{staticClass:"control"},[n("el-input",{model:{value:t.row.parameter,callback:function(n){e.$set(t.row,"parameter",n)},expression:"scope.row.parameter"}})],1):n("div",[e._v(e._s(t.row.parameter))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"控制",width:140},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"small",type:"info"},on:{click:function(n){e.reverseEditState(t.$index,t.row)}}},[e._v("编辑")])],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(n){e.handleDelete(t.$index,t.row,e.step.headerList)}}},[e._v("删除")])],1)],1)]}}])})],1)],1)],1),e._v(" "),n("el-tab-pane",{attrs:{label:"响应设置",name:"third"}},[n("el-form",{ref:"form3",attrs:{"label-width":"150px"}},[n("el-form-item",{attrs:{label:"结果"}},[n("el-input",{model:{value:e.step.result.name,callback:function(t){e.$set(e.step.result,"name",t)},expression:"step.result.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"HTTP状态码"}},[n("el-input",{model:{value:e.step.result.code,callback:function(t){e.$set(e.step.result,"code",t)},expression:"step.result.code"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"响应时间"}},[n("el-input",{model:{value:e.step.result.response_time,callback:function(t){e.$set(e.step.result,"response_time",t)},expression:"step.result.response_time"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"响应头"}},[n("el-input",{model:{value:e.step.result.response_header,callback:function(t){e.$set(e.step.result,"response_header",t)},expression:"step.result.response_header"}})],1)],1)],1),e._v(" "),n("el-tab-pane",{attrs:{label:"授权&代理",name:"4th"}},[n("el-form",{ref:"form4",attrs:{"label-width":"150px"}},[n("el-form-item",{attrs:{label:"HTTP登录名"}},[n("el-input",{model:{value:e.step.httpLogin,callback:function(t){e.$set(e.step,"httpLogin",t)},expression:"step.httpLogin"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"HTTP密码"}},[n("el-input",{model:{value:e.step.httpPassword,callback:function(t){e.$set(e.step,"httpPassword",t)},expression:"step.httpPassword"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"代理主机"}},[n("el-input",{model:{value:e.step.proxyHost,callback:function(t){e.$set(e.step,"proxyHost",t)},expression:"step.proxyHost"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"代理接口"}},[n("el-input",{model:{value:e.step.proxyPort,callback:function(t){e.$set(e.step,"proxyPort",t)},expression:"step.proxyPort"}})],1)],1)],1)],1)],1)},staticRenderFns:[]}},748:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"treeview",attrs:{id:"tree"}},e._l(e.itemGroup,function(t){return n("li",{class:t.collapsed?"expandable":"collapsable"},[n("div",{staticClass:"hitarea",class:t.collapsed?"expandable-hitarea":"collapsable-hitarea",on:{click:function(e){e.preventDefault(),t.collapsed=!t.collapsed}}}),e._v(" "),n("span",[e._v(e._s(t.title))]),e._v(" "),t.items&&t.items.length>0?n("ul",{staticClass:"child-view",style:t.collapsed?{display:"none"}:{diplay:"block"}},e._l(t.items,function(t){return n("li",[n("a",{staticClass:"leaf",class:t.type,attrs:{href:"#",draggable:"true"},on:{dragstart:function(n){e.dragStart(n,t)}},nativeOn:{click:function(e){e.stopPropagation(),function(){return!1}(e)}}},[e._v("\n          "+e._s(t.name)+"\n            ")])])})):e._e()])}))},staticRenderFns:[]}},749:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"drag-container"},[n("div",{staticClass:"btn-group-right"},[e.readOnly?e._e():n("button",{on:{click:e.description}},[n("span",{staticClass:"btn-description"},[e._v("备注")])]),e._v(" "),e.readOnly?e._e():n("button",{on:{click:e.save}},[n("span",{staticClass:"btn-save"},[e._v("保存")])])]),e._v(" "),n("div",{on:{"!drop":function(t){t.preventDefault(),e.onDrop(t)},dragover:function(e){e.preventDefault()}}},e._l(e.nodes,function(t,l){return n("step-node",{key:t.id,ref:t.ref,refInFor:!0,attrs:{id:t.id,index:l},on:{remove:function(t){e.removeNode(l)}}})})),e._v(" "),n("edit-modal",{ref:"editModal",attrs:{id:"editModal"}})],1)},staticRenderFns:[]}},750:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"node",style:{left:e.step.x+"px",top:e.step.y+"px"},attrs:{id:this.id},on:{mouseup:function(t){t.preventDefault(),e.updateXY(t)},"!dblclick":function(t){e.openEdit(t)}}},[n("div",{staticClass:"close",on:{dblclick:function(e){e.stopPropagation()},"!click":function(t){t.stopPropagation(),e.$emit("remove")}}}),e._v(" "),n("div",{staticClass:"step",class:e.step.type},[n("span",{staticClass:"ep"})]),e._v(" "),n("div",[n("p",[e._v(e._s(e.step.name))])])])},staticRenderFns:[]}},751:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{ref:"form",attrs:{rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"步骤名称",prop:"name"}},[n("el-input",{staticStyle:{width:"450px"},attrs:{placeholder:"步骤名称"},model:{value:e.step.name,callback:function(t){e.$set(e.step,"name",t)},expression:"step.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"数据源选择"}},[n("el-select",{attrs:{placeholder:"数据源选择"},model:{value:e.step.connection,callback:function(t){e.$set(e.step,"connection",t)},expression:"step.connection"}},e._l(e.dataSource.sourceList,function(t){return n("el-option",{attrs:{label:t.name,value:t.id}},[n("span",{staticStyle:{float:"left"}},[e._v(e._s(t.name))]),e._v(" "),n("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.type))])])}))],1),e._v(" "),n("el-form-item",{attrs:{label:"SQL script"}},[n("el-input",{staticStyle:{width:"450px"},attrs:{type:"textarea",placeholder:"请输入内容",autosize:{minRows:5}},model:{value:e.step.sql,callback:function(t){e.$set(e.step,"sql",t)},expression:"step.sql"}})],1),e._v(" "),n("el-row",{attrs:{flex:""}},[n("el-col",{attrs:{span:16}},[n("el-button",{attrs:{type:"primary"},on:{click:e.fetchFieldsFromInput}},[e._v("获取字段")]),e._v(" "),n("el-button",{attrs:{icon:"plus"},on:{click:e.addCondition}}),e._v(" "),n("br"),n("br"),e._v(" "),n("el-table",{attrs:{data:e.step.fields,stripe:"","max-height":200}},[n("el-table-column",{attrs:{type:"index",width:60}}),e._v(" "),n("el-table-column",{attrs:{label:"字段名称",width:180},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-select",{attrs:{placeholder:"字段名称"},model:{value:t.row.name,callback:function(n){e.$set(t.row,"name",n)},expression:"scope.row.name"}},e._l(e.step.availableFields,function(e){return n("el-option",{attrs:{value:e.name}})}))],1):n("div",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"控制",width:140},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"small",type:"info"},on:{click:function(n){e.reverseEditState(t.$index,t.row)}}},[e._v("编辑")])],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(n){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])],1)],1)]}}])})],1)],1),e._v(" "),n("el-col",{attrs:{span:6,offset:2}},[n("p",[e._v("插入记录数字段:")]),e._v(" "),n("el-input",{model:{value:e.step.insert_field,callback:function(t){e.$set(e.step,"insert_field",t)},expression:"step.insert_field"}}),e._v(" "),n("p",[e._v("更新记录数字段:")]),e._v(" "),n("el-input",{model:{value:e.step.update_field,callback:function(t){e.$set(e.step,"update_field",t)},expression:"step.update_field"}}),e._v(" "),n("p",[e._v(" 删除记录数字段:")]),e._v(" "),n("el-input",{model:{value:e.step.delete_field,callback:function(t){e.$set(e.step,"delete_field",t)},expression:"step.delete_field"}})],1)],1)],1)},staticRenderFns:[]}},752:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-tabs",{staticStyle:{width:"651px"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"基本设置",name:"first"}},[n("el-form",{ref:"form",attrs:{rules:e.rules,model:e.step,"label-width":"150px"}},[n("el-form-item",{attrs:{label:"步骤名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入步骤名称"},model:{value:e.step.name,callback:function(t){e.$set(e.step,"name",t)},expression:"step.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"来源字段"}},[n("el-select",{model:{value:e.step.valueField,callback:function(t){e.$set(e.step,"valueField",t)},expression:"step.valueField"}},e._l(e.step.availableFields,function(e){return n("el-option",{attrs:{value:e.name}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"字段内容"}},[n("el-radio-group",{model:{value:e.fieldType,callback:function(t){e.fieldType=t},expression:"fieldType"}},[n("el-radio",{attrs:{label:1}},[e._v("数据")]),e._v(" "),n("el-radio",{attrs:{label:2}},[e._v("文件名")]),e._v(" "),n("el-radio",{attrs:{label:3}},[e._v("URL")])],1)],1)],1)],1),e._v(" "),n("el-tab-pane",{attrs:{label:"输出设置",name:"second"}},[n("el-form",{ref:"form2",attrs:{"label-width":"150px"}},[n("el-row",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"flex",justify:"end"}},[n("el-col",{attrs:{span:5}},[n("el-button",{attrs:{icon:"plus"},on:{click:e.addOutPut}},[e._v("添加输出")])],1)],1),e._v(" "),n("el-table",{attrs:{data:e.step.fields,stripe:"",border:"","max-height":250}},[n("el-table-column",{attrs:{type:"index",width:70,label:"序号"}}),e._v(" "),n("el-table-column",{attrs:{label:"名称",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{size:"mini"},model:{value:t.row.name,callback:function(n){e.$set(t.row,"name",n)},expression:"scope.row.name"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"路径",width:200},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{size:"mini"},model:{value:t.row.path,callback:function(n){e.$set(t.row,"path",n)},expression:"scope.row.path"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"类型",width:180},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[n("el-select",{attrs:{size:"mini"},model:{value:t.row.type,callback:function(n){e.$set(t.row,"type",n)},expression:"scope.row.type"}},e._l(e.inputType,function(e){return n("el-option",{attrs:{value:e}})}))],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"长度",width:80},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{size:"mini"},model:{value:t.row.length,callback:function(n){e.$set(t.row,"length",n)},expression:"scope.row.length"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"精度",width:80},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{size:"mini"},model:{value:t.row.precision,callback:function(n){e.$set(t.row,"precision",n)},expression:"scope.row.precision"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"空格处理",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{attrs:{size:"mini"},model:{value:t.row.trim_type,callback:function(n){e.$set(t.row,"trim_type",n)},expression:"scope.row.trim_type"}},[n("el-option",{attrs:{value:"none"}}),e._v(" "),n("el-option",{attrs:{value:"both"}})],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"控制",width:80},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){e.handleDelete(t.$index,t.row,e.step.fields)}}},[e._v("删除")])]}}])})],1)],1)],1)],1)],1)},staticRenderFns:[]}},753:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{float:"right"}},[n("el-popover",{ref:"popover",attrs:{placement:"top-end",width:e.width,trigger:"click",content:e.text}},[e._t("default")],2),e._v(" "),n("el-button",{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],attrs:{icon:"information",type:"info"}},[e._v("帮助")])],1)},staticRenderFns:[]}},754:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{ref:"form",attrs:{rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"步骤名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入步骤名称"},model:{value:e.step.name,callback:function(t){e.$set(e.step,"name",t)},expression:"step.name"}})],1),e._v(" "),n("br"),e._v(" "),n("el-button",{attrs:{icon:"plus"},on:{click:e._addRecord}}),e._v(" "),n("br"),n("br"),e._v(" "),n("el-table",{attrs:{data:e.step.fields,stripe:"",border:"","max-height":300}},[n("el-table-column",{attrs:{type:"index",width:60}}),e._v(" "),n("el-table-column",{attrs:{label:"名称",width:220},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-input",{attrs:{size:"mini"},model:{value:t.row.name,callback:function(n){e.$set(t.row,"name",n)},expression:"scope.row.name"}})],1):n("div",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"类型",width:220},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",{staticClass:"control"},[n("el-select",{attrs:{size:"mini"},model:{value:t.row.type,callback:function(n){e.$set(t.row,"type",n)},expression:"scope.row.type"}},e._l(e.options.sysDataType,function(e){return n("el-option",{attrs:{label:e.name,value:e.value}})}))],1):n("div",[e._v(e._s(t.row.type))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"控制",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(n){e.reverseEditState(t.$index,t.row)}}},[e._v("编辑")])],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])],1)],1)]}}])})],1)],1)},staticRenderFns:[]}},755:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{ref:"form",attrs:{rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"步骤名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"步骤名称"},model:{value:e.step.name,callback:function(t){e.$set(e.step,"name",t)},expression:"step.name"}})],1),e._v(" "),n("br"),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.fetchFields}},[e._v("获取字段")]),e._v(" "),n("br"),n("br"),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.step.fields,stripe:"","max-height":400}},[n("el-table-column",{attrs:{type:"index",width:"80"}}),e._v(" "),n("el-table-column",{attrs:{label:"字段名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-select",{attrs:{placeholder:"字段名称"},model:{value:t.row.name,callback:function(n){e.$set(t.row,"name",n)},expression:"scope.row.name"}},e._l(e.step.availableFields,function(e){return n("el-option",{attrs:{value:e.name}})}))],1):n("div",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"升序",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-select",{attrs:{placeholder:"忽略大小写"},model:{value:t.row.ascending,callback:function(n){e.$set(t.row,"ascending",n)},expression:"scope.row.ascending"}},[n("el-option",{attrs:{label:"是",value:"Y"}}),e._v(" "),n("el-option",{attrs:{label:"否",value:"N"}})],1)],1):n("div",[e._v(e._s(t.row.ascending))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"大小写敏感",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-select",{attrs:{placeholder:"大小写敏感"},model:{value:t.row.case_sensitive,callback:function(n){e.$set(t.row,"case_sensitive",n)},expression:"scope.row.case_sensitive"}},[n("el-option",{attrs:{label:"是",value:"Y"}}),e._v(" "),n("el-option",{attrs:{label:"否",value:"N"}})],1)],1):n("div",[e._v(e._s(t.row.case_sensitive))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"small",type:"info"},on:{click:function(e){t.row.edit=!t.row.edit}}},[e._v("编辑")])],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(n){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])],1)],1)]}}])})],1)],1)},staticRenderFns:[]}},756:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],class:e.maskClasses,on:{click:e.mask}})]),e._v(" "),n("div",{class:e.wrapClasses,on:{click:e.handleWrapClick}},[n("transition",{attrs:{name:"ease"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],class:e.classes,style:e.mainStyles},[n("div",{class:[e.prefixCls+"-content"]},[e.showHead?n("div",{class:[e.prefixCls+"-header"]},[e._t("header",[n("div",{class:[e.prefixCls+"-header-inner"]
},[e._v(e._s(e.title))])])],2):e._e(),e._v(" "),n("div",{class:[e.prefixCls+"-body"]},[e._t("default")],2),e._v(" "),e.footerHide?e._e():n("div",{class:[e.prefixCls+"-footer"]},[e._t("footer",[n("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){e.ok(t)}}},[e._v("Ok")])])],2)])])])],1)],1)},staticRenderFns:[]}},757:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{ref:"form",attrs:{rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"步骤名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"Key字段"},model:{value:e.step.name,callback:function(t){e.$set(e.step,"name",t)},expression:"step.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"Key字段"}},[n("el-input",{attrs:{placeholder:"Key字段"},model:{value:e.step.typefield,callback:function(t){e.$set(e.step,"typefield",t)},expression:"step.typefield"}})],1),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.fetchFieldsFromTable}},[e._v("获取字段")]),e._v(" "),n("el-button",{attrs:{icon:"plus"},on:{click:e._addRecord}}),e._v(" "),n("br"),n("br"),e._v(" "),n("el-table",{attrs:{data:e.step.fields,stripe:"","max-height":300}},[n("el-table-column",{attrs:{type:"index",width:"60"}}),e._v(" "),n("el-table-column",{attrs:{label:"字段名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-select",{model:{value:t.row.name,callback:function(n){e.$set(t.row,"name",n)},expression:"scope.row.name"}},e._l(e.step.availableFields,function(e){return n("el-option",{attrs:{value:e.name}})}))],1):n("div",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"key值",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-input",{model:{value:t.row.value,callback:function(n){e.$set(t.row,"value",n)},expression:"scope.row.value"}})],1):n("div",[e._v(e._s(t.row.value))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"value字段",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-input",{model:{value:t.row.norm,callback:function(n){e.$set(t.row,"norm",n)},expression:"scope.row.norm"}})],1):n("div",[e._v(e._s(t.row.norm))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"small",type:"info"},on:{click:function(n){e.reverseEditState(t.$index,t.row)}}},[e._v("编辑")])],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(n){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])],1)],1)]}}])})],1)],1)},staticRenderFns:[]}},758:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{ref:"form",attrs:{inline:!0,width:"650"}},[n("el-form-item",{attrs:{label:"条件是否取反"}},[n("el-checkbox",{staticStyle:{"padding-right":"50px"},attrs:{"true-label":"Y","false-label":"N"},model:{value:e.condition.negated,callback:function(t){e.$set(e.condition,"negated",t)},expression:"condition.negated"}}),e._v("\n      操作符\n      "),n("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"操作符"},model:{value:e.condition.operator,callback:function(t){e.$set(e.condition,"operator",t)},expression:"condition.operator"}},e._l(e.options.operators,function(e){return n("el-option",{attrs:{value:e}})}))],1),e._v(" "),n("br"),e._v(" "),n("el-form-item",{attrs:{label:"选择一个字段"}},[n("el-select",{attrs:{placeholder:"选择"},model:{value:e.condition.leftvalue,callback:function(t){e.$set(e.condition,"leftvalue",t)},expression:"condition.leftvalue"}},e._l(e.availableFields,function(e){return n("el-option",{attrs:{value:e.name}})}))],1),e._v(" "),n("br"),e._v(" "),n("el-form-item",{attrs:{label:"选择一个条件"}},[n("el-select",{attrs:{placeholder:"选择一个条件"},model:{value:e.condition.function,callback:function(t){e.$set(e.condition,"function",t)},expression:"condition.function"}},e._l(e.options.func,function(e){return n("el-option",{attrs:{value:e.label}})}))],1),e._v(" "),n("br"),e._v(" "),n("el-form-item",{attrs:{label:"选择一个字段"}},[n("el-select",{attrs:{placeholder:"选择一个字段"},on:{change:function(t){e.condition.value.text=""}},model:{value:e.condition.rightvalue,callback:function(t){e.$set(e.condition,"rightvalue",t)},expression:"condition.rightvalue"}},e._l(e.availableFields,function(e){return n("el-option",{attrs:{value:e.name}})})),e._v("\n      或\n      "),n("el-button",{attrs:{type:"text"},on:{click:function(t){e.dialogTableVisible=!e.dialogTableVisible}}},[e._v("输入一个值")]),e._v("\n      "+e._s(null!=e.condition.value.text&&""!=e.condition.value.text.trim()?"输入值:"+e.condition.value.text:"")+"\n    ")],1),e._v(" "),n("br")],1),e._v(" "),n("el-dialog",{attrs:{title:"输入一个值",size:"tiny","custom-class":"dialog-fit-content","modal-append-to-body":e.modalAppendToBody,"close-on-click-modal":!1},model:{value:e.dialogTableVisible,callback:function(t){e.dialogTableVisible=t},expression:"dialogTableVisible"}},[n("el-form",[n("el-form-item",{attrs:{label:"类型","label-width":"120px"}},[n("el-select",{staticStyle:{width:"270px"},on:{change:function(t){e.condition.value.mask=""}},model:{value:e.condition.value.type,callback:function(t){e.$set(e.condition.value,"type",t)},expression:"condition.value.type"}},e._l(e.options.inputTypes,function(e){return n("el-option",{attrs:{value:e}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"值","label-width":"120px"}},[n("el-input",{staticStyle:{width:"270px"},model:{value:e.condition.value.text,callback:function(t){e.$set(e.condition.value,"text",t)},expression:"condition.value.text"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogTableVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogTableVisible=!1,e.condition.rightvalue=""}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]}},759:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{ref:"form",attrs:{model:e.step,"label-width":"100px",rules:e.rules}},[n("el-form-item",{attrs:{label:"步骤名称",prop:"name"}},[n("el-input",{model:{value:e.step.name,callback:function(t){e.$set(e.step,"name",t)},expression:"step.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"数据选择"}},[n("el-row",{staticStyle:{"padding-right":"20px"}},[n("el-col",{attrs:{span:14}},[n("el-select",{attrs:{value:e.step.connection,placeholder:"数据源"},model:{value:e.step.connection,callback:function(t){e.$set(e.step,"connection",t)},expression:"step.connection"}},e._l(e.dataSource.sourceList,function(e){return n("el-option",{attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),n("el-col",{staticStyle:{"margin-right":"8px"},attrs:{span:2}},[n("el-button",{directives:[{name:"show",rawName:"v-show",value:""!=e.dbType,expression:"dbType != ''"}],attrs:{disabled:!0}},[e._v(e._s(e.dbType))])],1),e._v(" "),n("el-col",{attrs:{span:2,offset:3}},[n("el-button",{attrs:{type:"primary",icon:"setting"},on:{click:e.showSqlBuild}},[e._v("导入表")])],1)],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"sql"}},[n("el-input",{staticClass:"sql11",attrs:{type:"textarea",rows:14,resize:"none"},model:{value:e.step.sql,callback:function(t){e.$set(e.step,"sql",t)},expression:"step.sql"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"记录数量限制"}},[n("el-row",{staticStyle:{"padding-right":"20px"}},[n("el-col",{attrs:{span:13}},[n("el-input-number",{attrs:{step:1e3,min:0},model:{value:e.step.limit,callback:function(t){e.$set(e.step,"limit",t)},expression:"step.limit"}})],1),e._v(" "),n("el-col",{attrs:{span:2,offset:6}},[n("el-button",{attrs:{type:"info"},on:{click:e.testSQL}},[e._v("测试SQL")])],1)],1)],1),e._v(" "),n("el-form-item",{attrs:{label:""}},[n("el-col",{attrs:{span:6}},[n("el-checkbox",{attrs:{"true-label":"Y","false-label":"N"},model:{value:e.step.lazy_conversion_active,callback:function(t){e.$set(e.step,"lazy_conversion_active",t)},expression:"step.lazy_conversion_active"}},[e._v("简易转换")])],1),e._v(" "),n("el-col",{attrs:{span:7}},[n("el-checkbox",{attrs:{"true-label":"Y","false-label":"N"},model:{value:e.step.variables_active,callback:function(t){e.$set(e.step,"variables_active",t)},expression:"step.variables_active"}},[e._v("替换SQL语句里的变量")])],1),e._v(" "),n("el-col",{attrs:{span:7}},[e._v("              ")])],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"导入表",size:"full",modal:!1,"close-on-click-modal":!1},model:{value:e.isShow,callback:function(t){e.isShow=t},expression:"isShow"}},[n("el-tabs",{attrs:{"active-name":"table"},on:{"tab-click":e.tabClickHandler}},[n("el-tab-pane",{attrs:{label:"数据表",name:"table"}},[n("el-row",{staticStyle:{"margin-bottom":"5px"},attrs:{gutter:10}},[n("el-col",{attrs:{span:12}},[n("el-input",{attrs:{placeholder:"输入表名或中文名",icon:"search","on-icon-click":e.filterTable},model:{value:e.filterName,callback:function(t){e.filterName=t},expression:"filterName"}})],1)],1),e._v(" "),n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:12}},[n("el-table",{attrs:{data:e.dataSource.tables,"max-height":e.maxHeight,border:"","row-style":e.setRowColor},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"表名"}}),e._v(" "),n("el-table-column",{attrs:{prop:"cnname",label:"中文名"}}),e._v(" "),n("el-table-column",{attrs:{label:"字段",width:80},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(n){e.showSetFields(t.row,t.$index)}}},[e._v("配置")])]}}])})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.curEditTable.fields.length>0,expression:"curEditTable.fields.length > 0"}],staticClass:"fieldBox",style:{maxHeight:e.maxHeight-20+"px"},attrs:{id:"fieldBox"}},[n("el-checkbox",{attrs:{indeterminate:e.curEditTable.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.curEditTable.selectedAllFields,callback:function(t){e.$set(e.curEditTable,"selectedAllFields",t)},expression:"curEditTable.selectedAllFields"}},[e._v("全选")]),e._v(" "),n("div",{staticStyle:{margin:"15px 0","border-bottom":"solid","border-width":"1px","border-bottom-color":"#E5E9F2"}}),e._v(" "),n("el-checkbox-group",{on:{change:e.handleCheckedCitiesChange},model:{value:e.curEditTable.selectedFields,callback:function(t){e.$set(e.curEditTable,"selectedFields",t)},expression:"curEditTable.selectedFields"}},e._l(e.curEditTable.fields,function(t){return n("div",[n("el-checkbox",{attrs:{label:t}},[n("span",{staticClass:"field",class:{pk:1==t.pk}},[n("table",[n("tr",[n("td",{staticStyle:{width:"100px"}},[e._v(e._s(t.name))]),e._v(" "),n("td",{staticStyle:{width:"100px"}},[e._v(e._s(t.cnname?t.cnname:""))]),e._v(" "),n("td",{staticStyle:{width:"90px"}},[e._v(e._s(t.type))])])])])])],1)}))],1)])],1)],1),e._v(" "),n("el-tab-pane",{attrs:{label:"联接关系",name:"join",disabled:e.selectedTableSize<2}},[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-table",{attrs:{data:e.step.ext.joins,border:"","max-height":e.maxHeight/2-35,"row-style":e.setRowColor2}},[n("el-table-column",{attrs:{prop:"parent",label:"主表",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.$index==e.joinsConditions.rowIndex?n("div",[e._v("\n                    "+e._s(t.row.parent.name)+"\n              ")]):n("div",[n("el-select",{attrs:{filterable:"",placeholder:"请选择",size:"mini"},model:{value:t.row.parent,callback:function(n){e.$set(t.row,"parent",n)},expression:"scope.row.parent"}},e._l(e.step.ext.tables,function(e){return n("el-option",{attrs:{value:e,label:e.name+"|"+e.cnname}})}))],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"joinType",label:"联接类型",width:"152"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{attrs:{size:"mini"},model:{value:t.row.joinType,callback:function(n){e.$set(t.row,"joinType",n)},expression:"scope.row.joinType"}},e._l(e.step.ext.jointype,function(e){return n("el-option",{attrs:{value:e}})}))]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"client",label:"子表",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.$index==e.joinsConditions.rowIndex?n("div",[e._v("\n                    "+e._s(t.row.client.name)+"\n              ")]):n("div",[n("el-select",{attrs:{filterable:"",placeholder:"请选择",size:"mini"},model:{value:t.row.client,callback:function(n){e.$set(t.row,"client",n)},expression:"scope.row.client"}},e._l(e.step.ext.tables,function(e){return n("el-option",{attrs:{value:e,label:e.cnname?e.name+"|"+e.cnname:e.name}})}))],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{directives:[{name:"show",rawName:"v-show",value:t.$index!=e.joinsConditions.rowIndex,expression:"scope.$index != joinsConditions.rowIndex"}]},[n("el-row",[n("el-col",{attrs:{span:8}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"设置关联条件",placement:"right"}},[n("el-button",{attrs:{icon:"setting",size:"mini"},on:{click:function(n){e.setJoinConditions(t.row,t.$index)}}})],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-button",{attrs:{icon:"plus",size:"mini"},on:{click:function(n){e.joinsPlusHandle(t.$index)}}})],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-button",{attrs:{icon:"minus",size:"mini"},on:{click:function(n){e.joinsMinusHandle(t.$index)}}})],1)],1)],1)]}}])})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:24}},[n("div",{staticClass:"line"})])],1),e._v(" "),n("el-row",{attrs:{gutter:8}},[n("el-col",{attrs:{span:16}},[n("el-input",{model:{value:e.joinsConditions.curRow.logic,callback:function(t){e.$set(e.joinsConditions.curRow,"logic",t)},expression:"joinsConditions.curRow.logic"}},[n("template",{slot:"prepend"},[e._v("逻辑 ")])],2)],1),e._v(" "),n("el-col",{attrs:{span:4}},[n("div",[n("el-row",[n("el-col",{attrs:{span:12}},[e.joinsConditions.curRow.parent?n("el-button",{attrs:{icon:"plus",type:"primary"},on:{click:e.conditionsPlusHandle}}):e._e()],1),e._v(" "),n("el-col",{attrs:{span:12}},[e.joinsConditions.curRow.parent?n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"确认关联条件",placement:"right"}},[n("el-button",{attrs:{icon:"check",type:"success"},on:{click:e.reSetJoinsConditions}})],1):e._e()],1)],1)],1)])],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:24}},[n("div",{staticClass:"line"})])],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:24}},[n("el-table",{attrs:{data:e.joinsConditions.curRow.conditions,border:"","max-height":e.maxHeight/2-35}},[n("el-table-column",{attrs:{prop:"index",width:"30"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(t.row.index)+"\n            ")]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"field",label:"主表字段",width:"190"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{attrs:{size:"mini"},model:{value:t.row.field,callback:function(n){e.$set(t.row,"field",n)},expression:"scope.row.field"}},e._l(e.joinsConditions.parentFields,function(e){return n("el-option",{attrs:{value:e.name}})}))]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"cndType",label:"条件",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{attrs:{size:"mini"},model:{value:t.row.cndType,callback:function(n){e.$set(t.row,"cndType",n)},expression:"scope.row.cndType"}},e._l(e.joinsConditions.condition,function(e){return n("el-option",{attrs:{value:e}})}))]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"value",label:"子表字段",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{attrs:{size:"mini"},model:{value:t.row.value,callback:function(n){e.$set(t.row,"value",n)},expression:"scope.row.value"}},e._l(e.joinsConditions.clientFields,function(e){return n("el-option",{attrs:{value:e.name}})}))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(n){e.conditionsMinusHandle(t.row.index,t.$index)}}},[e._v("删除")])]}}])})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:24}},[n("div",{staticClass:"line"})])],1)],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.isShow=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.buildSql}},[e._v("导入表")])],1)],1)],1)},staticRenderFns:[]}},760:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{ref:"form",attrs:{model:e.step,rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"步骤名称",prop:"name"}},[n("el-input",{model:{value:e.step.name,callback:function(t){e.$set(e.step,"name",t)},expression:"step.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"错误处理步骤"}},[n("el-select",{attrs:{placeholder:"错误处理步骤"},model:{value:e.step.send_false_to,callback:function(t){e.$set(e.step,"send_false_to",t)},expression:"step.send_false_to"}},e._l(e.nextSteps,function(e){return n("el-option",{attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),n("el-button",{attrs:{icon:"plus"},on:{click:e.addRecord}}),e._v(" "),n("br"),n("br"),e._v(" "),n("el-form-item",{attrs:{"label-width":"0px"}},[n("el-table",{attrs:{data:e.step.fields,stripe:"","max-height":350}},[n("el-table-column",{attrs:{type:"index",label:"编号",width:80}}),e._v(" "),n("el-table-column",{attrs:{prop:"validation_name",label:"条件名称",width:280}}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:140,"class-name":"table-row"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"small",type:"info"},on:{click:function(n){e.showEditor(t.$index)}}},[e._v("编辑")])],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(n){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])],1)],1)]}}])})],1)],1),e._v(" "),n("modal",{attrs:{title:"条件编辑"},model:{value:e.showModal,callback:function(t){e.showModal=t},expression:"showModal"}},[n("editor",{attrs:{field:e.step.fields[e.currentIndex],availableFields:e.step.availableFields}})],1)],1)},staticRenderFns:[]}},761:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{ref:"form",attrs:{rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"步骤名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"步骤名称"},model:{value:e.step.name,callback:function(t){e.$set(e.step,"name",t)},expression:"step.name"}})],1),e._v(" "),n("el-button",{attrs:{icon:"plus"},on:{click:e._addRecord}}),e._v(" "),n("br"),n("br"),e._v(" "),n("el-table",{attrs:{data:e.step.fields,stripe:"","max-height":300}},[n("el-table-column",{attrs:{type:"index",width:"60"}}),e._v(" "),n("el-table-column",{attrs:{label:"名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-input",{attrs:{size:"mini"},model:{value:t.row.name,callback:function(n){e.$set(t.row,"name",n)},expression:"scope.row.name"}})],1):n("div",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"变量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-input",{attrs:{size:"mini"},model:{value:t.row.variable,callback:function(n){e.$set(t.row,"variable",n)},expression:"scope.row.variable"}})],1):n("div",[e._v(e._s(t.row.variable))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"类型",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-select",{attrs:{size:"mini"},model:{value:t.row.type,callback:function(n){e.$set(t.row,"type",n)},expression:"scope.row.type"}},e._l(e.options.inputTypes,function(e){return n("el-option",{attrs:{value:e}})}))],1):n("div",[e._v(e._s(t.row.type))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(n){e.reverseEditState(t.$index,t.row)}}},[e._v("编辑")])],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])],1)],1)]}}])})],1)],1)},staticRenderFns:[]}},762:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{ref:"form",attrs:{rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"步骤名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入步骤名称"},model:{value:e.step.name,callback:function(t){e.$set(e.step,"name",t)},expression:"step.name"}})],1),e._v(" "),n("br"),e._v(" "),n("el-button",{attrs:{icon:"plus"},on:{click:e._addRecord}}),e._v(" "),n("br"),n("br"),e._v(" "),n("el-table",{attrs:{data:e.step.fields,stripe:"",border:"","max-height":400}},[n("el-table-column",{attrs:{type:"index",width:60}}),e._v(" "),n("el-table-column",{attrs:{label:"流字段",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-input",{model:{value:t.row.field_name,callback:function(n){e.$set(t.row,"field_name",n)},expression:"scope.row.field_name"}})],1):n("div",[e._v(e._s(t.row.field_name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"计算公式",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",{staticClass:"control"},[n("el-select",{model:{value:t.row.calc_type,callback:function(n){e.$set(t.row,"calc_type",n)},expression:"scope.row.calc_type"}},e._l(e.options.calcType,function(e){return n("el-option",{attrs:{label:e.name,value:e.value}})}))],1):n("div",[e._v(e._s(t.row.calc_type))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"字段A",width:140},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-select",{model:{value:t.row.field_a,callback:function(n){e.$set(t.row,"field_a",n)},expression:"scope.row.field_a"}},e._l(e.mergedField,function(e){return n("el-option",{attrs:{value:e.name}})}))],1):n("div",[e._v(e._s(t.row.field_a))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"字段B",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-select",{model:{value:t.row.field_b,callback:function(n){e.$set(t.row,"field_b",n)},expression:"scope.row.field_b"}},e._l(e.mergedField,function(e){return n("el-option",{attrs:{value:e.name}})}))],1):n("div",[e._v(e._s(t.row.field_b))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"值类型",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",{staticClass:"control"},[n("el-select",{staticClass:"inline-input",model:{value:t.row.value_type,callback:function(n){e.$set(t.row,"value_type",n)},expression:"scope.row.value_type"}},e._l(e.options.inputTypes,function(e){return n("el-option",{attrs:{value:e}})}))],1):n("div",[e._v(e._s(t.row.value_type))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"控制",width:140},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"small",type:"info"},on:{click:function(n){e.reverseEditState(t.$index,t.row)}}},[e._v("编辑")])],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(n){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])],1)],1)]}}])})],1)],1)},staticRenderFns:[]}},763:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-tabs",{staticStyle:{width:"581px"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"基本设置",name:"first"}},[n("el-form",{ref:"form",attrs:{rules:e.rules,model:e.step,"label-width":"150px"}},[n("el-form-item",{attrs:{label:"步骤名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入步骤名称"},model:{value:e.step.name,callback:function(t){e.$set(e.step,"name",t)},expression:"step.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"文件路径"}},[n("el-select",{attrs:{disabled:"Y"==e.step.isInFields},model:{value:e.filePath,callback:function(t){e.filePath=t},expression:"filePath"}},[n("el-option",{attrs:{value:"${fileFolder}"}},[e._v("默认路径")])],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"文件名称"}},[n("el-input",{attrs:{disabled:"Y"==e.step.isInFields},model:{value:e.fileName,callback:function(t){e.fileName=t},expression:"fileName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"从字段中获取文件名?"}},[n("el-checkbox",{attrs:{"true-label":"Y","false-label":"N"},model:{value:e.step.isInFields,callback:function(t){e.$set(e.step,"isInFields",t)},expression:"step.isInFields"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"文件名字段名"}},[n("el-select",{attrs:{disabled:"N"==e.step.isInFields},model:{value:e.step.dynamicFilenameField,callback:function(t){e.$set(e.step,"dynamicFilenameField",t)},expression:"step.dynamicFilenameField"}},e._l(e.step.availableFields,function(e){return n("el-option",{attrs:{value:e.name}})}))],1)],1)],1),e._v(" "),n("el-tab-pane",{attrs:{label:"输出设置",name:"second"}},[n("el-form",{ref:"form2",attrs:{"label-width":"150px"}},[n("el-row",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"flex",justify:"end"}},[n("el-col",{attrs:{span:5}},[n("el-button",{attrs:{icon:"plus"},on:{click:e.addOutPut}},[e._v("添加输出")])],1)],1),e._v(" "),n("el-table",{attrs:{data:e.step.fields,stripe:"",border:"","max-height":250}},[n("el-table-column",{attrs:{type:"index",width:59}}),e._v(" "),n("el-table-column",{attrs:{label:"名称",width:230},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[n("el-input",{model:{value:t.row.name,callback:function(n){e.$set(t.row,"name",n)},expression:"scope.row.name"}})],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"元素",width:90},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[e._v(e._s(t.row.element_type))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"空格处理",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return["size"==t.row.element_type?n("div",[e._v(e._s(t.row.trim_type))]):n("div",[n("el-select",{model:{value:t.row.trim_type,callback:function(n){e.$set(t.row,"trim_type",n)},expression:"scope.row.trim_type"}},[n("el-option",{attrs:{value:"none"}}),e._v(" "),n("el-option",{attrs:{value:"both"}})],1)],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"控制",width:80},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(n){e.handleDelete(t.$index,t.row,e.step.fields)}}},[e._v("删除")])]}}])})],1)],1)],1)],1)],1)},staticRenderFns:[]}},764:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{ref:"form",attrs:{rules:e.rules,"label-width":"180px"}},[n("el-form-item",{attrs:{label:"步骤名称",prop:"name"}},[n("el-input",{model:{value:e.step.name,callback:function(t){e.$set(e.step,"name",t)},expression:"step.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"发送给true的数据步骤"}},[n("el-select",{staticStyle:{"padding-right":"25px"},attrs:{placeholder:"发送给true的数据步骤"},model:{value:e.step.send_true_to,callback:function(t){e.$set(e.step,"send_true_to",t)},expression:"step.send_true_to"}},e._l(e.nextSteps,function(e){return n("el-option",{attrs:{label:e.name,value:e.id}})})),e._v("\n    发送给false的数据步骤\n    "),n("el-select",{attrs:{placeholder:"发送给false的数据步骤"},model:{value:e.step.send_false_to,callback:function(t){e.$set(e.step,"send_false_to",t)},expression:"step.send_false_to"}},e._l(e.nextSteps,function(e){return n("el-option",{attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),n("el-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.addRecord}}),e._v(" "),n("br"),e._v(" "),n("br"),e._v(" "),n("el-tabs",{attrs:{type:"card"},on:{"tab-remove":e.removeTab},model:{value:e.tabs.activeTabIndex,callback:function(t){e.$set(e.tabs,"activeTabIndex",t)},expression:"tabs.activeTabIndex"}},[n("el-tab-pane",{attrs:{label:"条件列表",name:"0"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.step.conditions,stripe:"","max-height":400}},[n("el-table-column",{attrs:{type:"index",width:"60"}}),e._v(" "),n("el-table-column",{attrs:{prop:"operator",label:"操作符",width:"120"}}),e._v(" "),n("el-table-column",{attrs:{prop:"negated",label:"取反",width:"80"}}),e._v(" "),n("el-table-column",{attrs:{prop:"leftvalue",label:"字段1",width:"120"}}),e._v(" "),n("el-table-column",{attrs:{prop:"function",label:"条件",width:"120"}}),e._v(" "),n("el-table-column",{attrs:{prop:"rightvalue",label:"字段2",width:"120"}}),e._v(" "),n("el-table-column",{attrs:{prop:"value.text",label:"固定值",width:"140"}}),e._v(" "),n("el-table-column",{attrs:{label:"控制",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"small",type:"info"},on:{click:function(n){e.editCondition(t.$index,t.row)}}},[e._v("编辑")])],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(n){e.deleteCondition(t.$index,t.row)}}},[e._v("删除")])],1)],1)]}}])})],1)],1),e._v(" "),e._l(e.tabs.tabList,function(t){return n("el-tab-pane",{attrs:{label:"编辑条件#"+t.index,name:t.index,closable:!0}},[n("editor",{attrs:{condition:e.step.conditions[t.index-1],availableFields:e.step.availableFields}})],1)})],2)],1)},staticRenderFns:[]}},765:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-tabs",{staticStyle:{width:"581px"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"基本设置",name:"first"}},[n("el-form",{ref:"form",attrs:{rules:e.rules,model:e.step,"label-width":"150px"}},[n("el-form-item",{attrs:{label:"步骤名称",prop:"name"}},[n("el-col",{attrs:{span:12}},[n("el-input",{attrs:{placeholder:"请输入步骤名称"},model:{value:e.step.name,callback:function(t){e.$set(e.step,"name",t)},expression:"step.name"}})],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"文件路径"}},[n("el-select",{attrs:{disabled:"Y"==e.step.fileNameInField},model:{value:e.filePath,callback:function(t){e.filePath=t},expression:"filePath"}},[n("el-option",{attrs:{value:"${fileFolder}"}},[e._v("默认路径")])],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"文件名称"}},[n("el-col",{attrs:{span:12}},[n("el-input",{attrs:{disabled:"Y"==e.step.fileNameInField},model:{value:e.fileName,callback:function(t){e.fileName=t},expression:"fileName"}})],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"文件扩展名"}},[n("el-col",{attrs:{span:12}},[n("el-input",{model:{value:e.step.file.extention,callback:function(t){e.$set(e.step.file,"extention",t)},expression:"step.file.extention"}})],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"文件名配置项"}},[n("el-checkbox",{attrs:{"true-label":"Y","false-label":"N",disabled:"Y"==e.step.fileNameInField},model:{value:e.step.file.add_date,callback:function(t){e.$set(e.step.file,"add_date",t)},expression:"step.file.add_date"}},[e._v("包含日期")]),e._v(" "),n("el-checkbox",{attrs:{"true-label":"Y","false-label":"N",disabled:"Y"==e.step.fileNameInField},model:{value:e.step.file.add_time,callback:function(t){e.$set(e.step.file,"add_time",t)},expression:"step.file.add_time"}},[e._v("包含时间")])],1),e._v(" "),n("el-form-item",{attrs:{label:"文件名在字段中"}},[n("el-checkbox",{attrs:{"true-label":"Y","false-label":"N"},model:{value:e.step.fileNameInField,callback:function(t){e.$set(e.step,"fileNameInField",t)},expression:"step.fileNameInField"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"文件名字段名"}},[n("el-select",{attrs:{disabled:"N"==e.step.fileNameInField},model:{value:e.step.fileNameField,callback:function(t){e.$set(e.step,"fileNameField",t)},expression:"step.fileNameField"}},e._l(e.step.availableFields,function(e){return n("el-option",{attrs:{value:e.name}})}))],1)],1)],1),e._v(" "),n("el-tab-pane",{
attrs:{label:"内容设置",name:"second"}},[n("el-form",{ref:"form1",attrs:{"label-width":"150px"}},[n("el-form-item",{attrs:{label:"分隔符"}},[n("el-col",{attrs:{span:12}},[n("el-input",{model:{value:e.step.separator,callback:function(t){e.$set(e.step,"separator",t)},expression:"step.separator"}})],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"封闭符"}},[n("el-col",{attrs:{span:12}},[n("el-input",{model:{value:e.step.enclosure,callback:function(t){e.$set(e.step,"enclosure",t)},expression:"step.enclosure"}})],1),e._v(" "),n("el-col",{attrs:{span:10,offset:1}},[n("el-checkbox",{attrs:{"true-label":"Y","false-label":"N"},model:{value:e.step.enclosure_forced,callback:function(t){e.$set(e.step,"enclosure_forced",t)},expression:"step.enclosure_forced"}},[e._v("强制封闭")])],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"换行格式"}},[n("el-select",{model:{value:e.step.format,callback:function(t){e.$set(e.step,"format",t)},expression:"step.format"}},[n("el-option",{attrs:{value:"DOS"}},[e._v("CR+LF(Windows, DOS)")]),e._v(" "),n("el-option",{attrs:{value:"UNIX"}},[e._v("LF（Linux，Unix）")])],1)],1)],1)],1),e._v(" "),n("el-tab-pane",{attrs:{label:"输出设置",name:"three"}},[n("el-form",{ref:"form2",attrs:{"label-width":"150px"}},[n("el-row",{staticStyle:{"margin-bottom":"10px"}},[n("el-col",{attrs:{span:5}},[n("el-button",{attrs:{icon:"plus"},on:{click:e.addOutPut}},[e._v("添加输出")])],1)],1),e._v(" "),n("el-table",{attrs:{data:e.step.fields,stripe:"",border:"","max-height":250}},[n("el-table-column",{attrs:{label:"名称",width:150},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{attrs:{size:"mini"},model:{value:t.row.name,callback:function(n){e.$set(t.row,"name",n)},expression:"scope.row.name"}},e._l(e.step.availableFields,function(e){return n("el-option",{attrs:{value:e.name}})}))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"类型",width:150},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{attrs:{size:"mini"},model:{value:t.row.type,callback:function(n){e.$set(t.row,"type",n)},expression:"scope.row.type"}},e._l(e.inputType,function(e){return n("el-option",{attrs:{value:e}})}))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"格式化",width:180},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{attrs:{size:"mini"},model:{value:t.row.format,callback:function(n){e.$set(t.row,"format",n)},expression:"scope.row.format"}},e._l(e.format[t.row.type]||[""],function(e){return n("el-option",{attrs:{value:e}})}))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"空格处理",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{attrs:{size:"mini"},model:{value:t.row.trim_type,callback:function(n){e.$set(t.row,"trim_type",n)},expression:"scope.row.trim_type"}},e._l(e.trimType,function(e){return n("el-option",{attrs:{value:e.value,label:e.name}})}))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"控制",width:80},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)],1)],1)],1)},staticRenderFns:[]}},766:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{ref:"form",attrs:{rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"步骤名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"步骤名称"},model:{value:e.step.name,callback:function(t){e.$set(e.step,"name",t)},expression:"step.name"}})],1),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.fetchFieldsFromTable}},[e._v("获取字段")]),e._v(" "),n("el-button",{attrs:{icon:"plus"},on:{click:e._addRecord}}),e._v(" "),n("br"),n("br"),e._v(" "),n("el-table",{attrs:{data:e.step.fields,stripe:"","max-height":300}},[n("el-table-column",{attrs:{type:"index",width:60}}),e._v(" "),n("el-table-column",{attrs:{label:"字段名称",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-select",{model:{value:t.row.field_name,callback:function(n){e.$set(t.row,"field_name",n)},expression:"scope.row.field_name"}},e._l(e.step.availableFields,function(e){return n("el-option",{attrs:{value:e.name}})}))],1):n("div",[e._v(e._s(t.row.field_name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"变量名",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-input",{model:{value:t.row.variable_name,callback:function(n){e.$set(t.row,"variable_name",n)},expression:"scope.row.variable_name"}})],1):n("div",[e._v(e._s(t.row.variable_name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"变量存放类型",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-select",{model:{value:t.row.variable_type,callback:function(n){e.$set(t.row,"variable_type",n)},expression:"scope.row.variable_type"}},e._l(e.options.variableType,function(e){return n("el-option",{attrs:{value:e.value,label:e.name}})}))],1):n("div",[e._v(e._s(t.row.variable_type))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"默认值",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-input",{model:{value:t.row.default_value,callback:function(n){e.$set(t.row,"default_value",n)},expression:"scope.row.default_value"}})],1):n("div",[e._v(e._s(t.row.default_value))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:140},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"small",type:"info"},on:{click:function(n){e.reverseEditState(t.$index,t.row)}}},[e._v("编辑")])],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(n){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])],1)],1)]}}])})],1)],1)},staticRenderFns:[]}},767:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-tabs",{staticStyle:{width:"581px"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"基本设置",name:"first"}},[n("el-form",{ref:"form",attrs:{rules:e.rules,model:e.step,"label-width":"150px"}},[n("el-form-item",{attrs:{label:"步骤名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入步骤名称"},model:{value:e.step.name,callback:function(t){e.$set(e.step,"name",t)},expression:"step.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"URL"}},[n("el-input",{attrs:{disabled:"Y"==e.step.urlInField},model:{value:e.step.url,callback:function(t){e.$set(e.step,"url",t)},expression:"step.url"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"提交文件"}},[n("el-checkbox",{attrs:{"true-label":"Y","false-label":"N"},model:{value:e.step.postafile,callback:function(t){e.$set(e.step,"postafile",t)},expression:"step.postafile"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"请求实体字段"}},[n("el-select",{model:{value:e.step.requestEntity,callback:function(t){e.$set(e.step,"requestEntity",t)},expression:"step.requestEntity"}},e._l(e.step.availableFields,function(e){return n("el-option",{attrs:{value:e.name}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"从字段中获取URL?"}},[n("el-checkbox",{attrs:{"true-label":"Y","false-label":"N"},model:{value:e.step.urlInField,callback:function(t){e.$set(e.step,"urlInField",t)},expression:"step.urlInField"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"URL字段名"}},[n("el-select",{attrs:{disabled:"N"==e.step.urlInField},model:{value:e.step.urlField,callback:function(t){e.$set(e.step,"urlField",t)},expression:"step.urlField"}},e._l(e.step.availableFields,function(e){return n("el-option",{attrs:{value:e.name}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"connection超时"}},[n("el-input-number",{attrs:{min:0,step:500},model:{value:e.step.connectionTimeout,callback:function(t){e.$set(e.step,"connectionTimeout",t)},expression:"step.connectionTimeout"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"socket超时 "}},[n("el-input-number",{attrs:{min:0,step:500},model:{value:e.step.socketTimeout,callback:function(t){e.$set(e.step,"socketTimeout",t)},expression:"step.socketTimeout"}})],1)],1)],1),e._v(" "),n("el-tab-pane",{attrs:{label:"参数设置",name:"second"}},[n("el-form",{ref:"form2",attrs:{"label-width":"150px"}},[n("el-button",{attrs:{icon:"plus"},on:{click:e.addArg}},[e._v("添加Header参数")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.step.argList=e.fetchFromInputStream("arg")}}},[e._v("获取字段")]),e._v(" "),n("br"),n("br"),e._v(" "),n("el-table",{attrs:{data:e.step.argList,stripe:"",border:"","max-height":250}},[n("el-table-column",{attrs:{type:"index",width:60}}),e._v(" "),n("el-table-column",{attrs:{label:"名称",width:190},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-select",{model:{value:t.row.name,callback:function(n){e.$set(t.row,"name",n)},expression:"scope.row.name"}},e._l(e.step.availableFields,function(e){return n("el-option",{attrs:{value:e.name}})}))],1):n("div",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"命名参数",width:190},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",{staticClass:"control"},[n("el-input",{model:{value:t.row.parameter,callback:function(n){e.$set(t.row,"parameter",n)},expression:"scope.row.parameter"}})],1):n("div",[e._v(e._s(t.row.parameter))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"注入Header中",width:190},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",{staticClass:"control"},[n("el-checkbox",{attrs:{"true-label":"Y","false-label":"N"},model:{value:t.row.header,callback:function(n){e.$set(t.row,"header",n)},expression:"scope.row.header"}})],1):n("div",[e._v(e._s(t.row.header))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"控制",width:140},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"small",type:"info"},on:{click:function(n){e.reverseEditState(t.$index,t.row)}}},[e._v("编辑")])],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(n){e.handleDelete(t.$index,t.row,e.step.argList)}}},[e._v("删除")])],1)],1)]}}])})],1),e._v(" "),n("br"),n("br"),e._v(" "),n("el-button",{attrs:{icon:"plus"},on:{click:e.addQuery}},[e._v("添加查询参数")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.step.queryList=e.fetchFromInputStream()}}},[e._v("获取字段")]),e._v(" "),n("br"),n("br"),e._v(" "),n("el-table",{attrs:{data:e.step.queryList,stripe:"",border:"","max-height":250}},[n("el-table-column",{attrs:{type:"index",width:60}}),e._v(" "),n("el-table-column",{attrs:{label:"名称",width:190},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-select",{model:{value:t.row.name,callback:function(n){e.$set(t.row,"name",n)},expression:"scope.row.name"}},e._l(e.step.availableFields,function(e){return n("el-option",{attrs:{value:e.name}})}))],1):n("div",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"命名参数",width:190},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",{staticClass:"control"},[n("el-input",{model:{value:t.row.parameter,callback:function(n){e.$set(t.row,"parameter",n)},expression:"scope.row.parameter"}})],1):n("div",[e._v(e._s(t.row.parameter))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"控制",width:140},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"small",type:"info"},on:{click:function(n){e.reverseEditState(t.$index,t.row)}}},[e._v("编辑")])],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(n){e.handleDelete(t.$index,t.row,e.step.queryList)}}},[e._v("删除")])],1)],1)]}}])})],1)],1)],1),e._v(" "),n("el-tab-pane",{attrs:{label:"响应设置",name:"third"}},[n("el-form",{ref:"form3",attrs:{"label-width":"150px"}},[n("el-form-item",{attrs:{label:"结果"}},[n("el-input",{model:{value:e.step.result.name,callback:function(t){e.$set(e.step.result,"name",t)},expression:"step.result.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"HTTP状态码"}},[n("el-input",{model:{value:e.step.result.code,callback:function(t){e.$set(e.step.result,"code",t)},expression:"step.result.code"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"响应时间"}},[n("el-input",{model:{value:e.step.result.response_time,callback:function(t){e.$set(e.step.result,"response_time",t)},expression:"step.result.response_time"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"响应头"}},[n("el-input",{model:{value:e.step.result.response_header,callback:function(t){e.$set(e.step.result,"response_header",t)},expression:"step.result.response_header"}})],1)],1)],1),e._v(" "),n("el-tab-pane",{attrs:{label:"授权&代理",name:"4th"}},[n("el-form",{ref:"form4",attrs:{"label-width":"150px"}},[n("el-form-item",{attrs:{label:"HTTP登录名"}},[n("el-input",{model:{value:e.step.httpLogin,callback:function(t){e.$set(e.step,"httpLogin",t)},expression:"step.httpLogin"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"HTTP密码"}},[n("el-input",{model:{value:e.step.httpPassword,callback:function(t){e.$set(e.step,"httpPassword",t)},expression:"step.httpPassword"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"代理主机"}},[n("el-input",{model:{value:e.step.proxyHost,callback:function(t){e.$set(e.step,"proxyHost",t)},expression:"step.proxyHost"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"代理接口"}},[n("el-input",{model:{value:e.step.proxyPort,callback:function(t){e.$set(e.step,"proxyPort",t)},expression:"step.proxyPort"}})],1)],1)],1)],1)],1)},staticRenderFns:[]}},768:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{ref:"form",attrs:{model:e.step,"label-width":"100px",rules:e.rules}},[n("el-form-item",{attrs:{label:"步骤名称",prop:"name"}},[n("el-input",{model:{value:e.step.name,callback:function(t){e.$set(e.step,"name",t)},expression:"step.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"数据源选择"}},[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{prop:"connection"}},[n("el-select",{attrs:{placeholder:"目标数据源"},model:{value:e.step.connection,callback:function(t){e.$set(e.step,"connection",t)},expression:"step.connection"}},e._l(e.dataSource.sourceList,function(t){return n("el-option",{attrs:{label:t.name,value:t.id}},[n("span",{staticStyle:{float:"left"}},[e._v(e._s(t.name))]),e._v(" "),n("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.type))])])}))],1)],1),e._v(" "),n("el-col",{staticClass:"line",attrs:{span:1}},[e._v("--")]),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{prop:"table"}},[n("el-select",{attrs:{placeholder:"目标表..",filterable:""},model:{value:e.step.table,callback:function(t){e.$set(e.step,"table",t)},expression:"step.table"}},e._l(e.dataSource.tables,function(e){return n("el-option",{attrs:{label:e.cnname,value:e.name}})}))],1)],1)],1),e._v(" "),n("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"提交记录数"}},[n("el-input-number",{attrs:{min:0,step:1e3},model:{value:e.step.commit,callback:function(t){e.$set(e.step,"commit",t)},expression:"step.commit"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"插入前清空表"}},[n("el-checkbox",{staticStyle:{"padding-right":"50px"},attrs:{"true-label":"Y","false-label":"N"},model:{value:e.step.truncate,callback:function(t){e.$set(e.step,"truncate",t)},expression:"step.truncate"}}),e._v("\n      忽略插入错误\n      "),n("el-checkbox",{attrs:{"true-label":"Y","false-label":"N"},model:{value:e.step.ignore_errors,callback:function(t){e.$set(e.step,"ignore_errors",t)},expression:"step.ignore_errors"}})],1),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.fetchFieldsFromTable(e.transportFields)}}},[e._v("获取字段")]),e._v(" "),n("el-button",{attrs:{icon:"plus"},on:{click:e.addRecord}}),e._v(" "),n("br"),n("br"),e._v(" "),n("el-table",{attrs:{data:e.step.fields,stripe:"","max-height":300}},[n("el-table-column",{attrs:{type:"index",width:"70"}}),e._v(" "),n("el-table-column",{attrs:{label:"表字段",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-select",{attrs:{size:"mini",placeholder:"表字段"},model:{value:t.row.column_name,callback:function(n){e.$set(t.row,"column_name",n)},expression:"scope.row.column_name"}},e._l(e.selectedTable.columnList,function(e){return n("el-option",{attrs:{value:e.name}})}))],1):n("div",[e._v(e._s(t.row.column_name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"流字段",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-select",{attrs:{size:"mini"},model:{value:t.row.stream_name,callback:function(n){e.$set(t.row,"stream_name",n)},expression:"scope.row.stream_name"}},e._l(e.step.availableFields,function(e){return n("el-option",{attrs:{value:e.name}})}))],1):n("div",[e._v(e._s(t.row.stream_name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作","class-name":"table-row",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(n){e.reverseEditState(t.$index,t.row)}}},[e._v("编辑")])],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])],1)],1)]}}])})],1)],1)],1)},staticRenderFns:[]}},769:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-tabs",{staticStyle:{width:"651px"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"基本设置",name:"first"}},[n("el-form",{ref:"form",attrs:{rules:e.rules,model:e.step,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"步骤名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入步骤名称"},model:{value:e.step.name,callback:function(t){e.$set(e.step,"name",t)},expression:"step.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"URL",prop:"wsURL"}},[n("el-row",[n("el-col",{attrs:{span:16}},[n("el-input",{model:{value:e.step.wsURL,callback:function(t){e.$set(e.step,"wsURL",t)},expression:"step.wsURL"}})],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-button",{staticStyle:{"margin-left":"12px","margin-right":"12px"},attrs:{type:"info"},on:{click:e.loadService}},[e._v("加载服务 ")])],1)],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"接口"}},[n("el-select",{model:{value:e.step.wsOperation,callback:function(t){e.$set(e.step,"wsOperation",t)},expression:"step.wsOperation"}},e._l(e.webService.interfaceList,function(e){return n("el-option",{attrs:{value:e.name}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"2.0/3.0 兼容模式"}},[n("el-checkbox",{attrs:{"true-label":"Y","false-label":"N",min:0,step:500},model:{value:e.step.compatible,callback:function(t){e.$set(e.step,"compatible",t)},expression:"step.compatible"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"调用次数"}},[n("el-input-number",{attrs:{min:1,step:1},model:{value:e.step.callStep,callback:function(t){e.$set(e.step,"callStep",t)},expression:"step.callStep"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"重复元素名称"}},[n("el-input",{model:{value:e.step.repeating_element,callback:function(t){e.$set(e.step,"repeating_element",t)},expression:"step.repeating_element"}})],1)],1)],1),e._v(" "),n("el-tab-pane",{attrs:{label:"入参设置",name:"second"}},[n("el-form",{ref:"form2",attrs:{"label-width":"150px"}},[n("el-button",{attrs:{icon:"plus"},on:{click:e.addFieldsIn}},[e._v("添加参数")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.step.fieldsInList=e.fetchFromService(0)}}},[e._v("获取字段")]),e._v(" "),n("br"),n("br"),e._v(" "),n("el-table",{attrs:{data:e.step.fieldsInList,stripe:"",border:"","max-height":350,"max-width":600}},[n("el-table-column",{attrs:{type:"index",width:60}}),e._v(" "),n("el-table-column",{attrs:{label:"名称",width:150},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-select",{attrs:{size:"mini"},model:{value:t.row.name,callback:function(n){e.$set(t.row,"name",n)},expression:"scope.row.name"}},e._l(e.step.availableFields,function(e){return n("el-option",{attrs:{value:e.name}})}))],1):n("div",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"ws名称",width:150},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-input",{attrs:{size:"mini"},model:{value:t.row.wsName,callback:function(n){e.$set(t.row,"wsName",n)},expression:"scope.row.wsName"}})],1):n("div",[e._v(e._s(t.row.wsName))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"ws类型",width:150},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",{staticClass:"control"},[n("el-input",{attrs:{size:"mini"},model:{value:t.row.xsdType,callback:function(n){e.$set(t.row,"xsdType",n)},expression:"scope.row.xsdType"}})],1):n("div",[e._v(e._s(t.row.xsdType))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"控制",width:140},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{type:"info",size:"mini"},on:{click:function(n){e.reverseEditState(t.$index,t.row)}}},[e._v("编辑")])],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(n){e.handleDelete(t.$index,t.row,e.step.fieldsInList)}}},[e._v("删除\n                  ")])],1)],1)]}}])})],1)],1)],1),e._v(" "),n("el-tab-pane",{attrs:{label:"出参设置",name:"third"}},[n("el-form",{ref:"form3",attrs:{"label-width":"150px"}},[n("el-button",{attrs:{icon:"plus"},on:{click:e.addFieldsOut}},[e._v("添加参数")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.step.fieldsOutList=e.fetchFromService(1)}}},[e._v("获取字段")]),e._v(" "),n("br"),n("br"),e._v(" "),n("el-table",{attrs:{data:e.step.fieldsOutList,stripe:"",border:"","max-height":350}},[n("el-table-column",{attrs:{type:"index",width:60}}),e._v(" "),n("el-table-column",{attrs:{label:"名称",width:150},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-input",{model:{value:t.row.name,callback:function(n){e.$set(t.row,"name",n)},expression:"scope.row.name"}})],1):n("div",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"ws名称",width:150},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-input",{model:{value:t.row.wsName,callback:function(n){e.$set(t.row,"wsName",n)},expression:"scope.row.wsName"}})],1):n("div",[e._v(e._s(t.row.wsName))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"ws类型",width:150},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",{staticClass:"control"},[n("el-input",{model:{value:t.row.xsdType,callback:function(n){e.$set(t.row,"xsdType",n)},expression:"scope.row.xsdType"}})],1):n("div",[e._v(e._s(t.row.xsdType))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"控制",width:140},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"small",type:"info"},on:{click:function(n){e.reverseEditState(t.$index,t.row)}}},[e._v("编辑\n\n\n\n\n\n\n\n\n\n\n                  ")])],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(n){e.handleDelete(t.$index,t.row,e.step.fieldsOutList)}}},[e._v("删除\n\n\n\n\n\n\n\n\n\n\n                  ")])],1)],1)]}}])})],1)],1)],1),e._v(" "),n("el-tab-pane",{attrs:{label:"授权&代理",name:"4th"}},[n("el-form",{ref:"form4",attrs:{"label-width":"150px"}},[n("el-form-item",{attrs:{label:"HTTP登录名"}},[n("el-input",{model:{value:e.step.httpLogin,callback:function(t){e.$set(e.step,"httpLogin",t)},expression:"step.httpLogin"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"HTTP密码"}},[n("el-input",{model:{value:e.step.httpPassword,callback:function(t){e.$set(e.step,"httpPassword",t)},expression:"step.httpPassword"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"代理主机"}},[n("el-input",{model:{value:e.step.proxyHost,callback:function(t){e.$set(e.step,"proxyHost",t)},expression:"step.proxyHost"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"代理接口"}},[n("el-input",{model:{value:e.step.proxyPort,callback:function(t){e.$set(e.step,"proxyPort",t)},expression:"step.proxyPort"}})],1)],1)],1)],1)],1)},staticRenderFns:[]}},770:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{width:"600px"}},[n("el-form",{ref:"form",attrs:{rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"步骤名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"步骤名称"},model:{value:e.step.name,callback:function(t){e.$set(e.step,"name",t)},expression:"step.name"}})],1),e._v(" "),n("br"),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.obtainFields}},[e._v("获取字段")]),e._v(" "),n("el-button",{attrs:{icon:"plus"},on:{click:function(t){e.step.fields.push({name:"",case_insensitive:"Y",edit:!0})}}}),e._v(" "),n("br"),n("br"),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.step.fields,border:"",stripe:"","max-height":400}},[n("el-table-column",{attrs:{type:"index",width:"80"}}),e._v(" "),n("el-table-column",{attrs:{label:"字段名称",width:160},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-select",{attrs:{placeholder:"字段名称"},model:{value:t.row.name,callback:function(n){e.$set(t.row,"name",n)},expression:"scope.row.name"}},e._l(e.step.availableFields,function(e){return n("el-option",{attrs:{value:e.name}})}))],1):n("div",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"忽略大小写",width:160},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-select",{attrs:{placeholder:"忽略大小写"},model:{value:t.row.case_insensitive,callback:function(n){e.$set(t.row,"case_insensitive",n)},expression:"scope.row.case_insensitive"}},[n("el-option",{attrs:{value:"Y"}}),e._v(" "),n("el-option",{attrs:{value:"N"}})],1)],1):n("div",[e._v(e._s(t.row.case_insensitive))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:140},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"small",type:"info"},on:{click:function(e){t.row.edit=!t.row.edit}}},[e._v("编辑")])],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(n){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])],1)],1)]}}])})],1)],1)],1)},staticRenderFns:[]}},771:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.showModal?n("Modal",{attrs:{title:"STEP 编辑",styles:e.styles,"class-name":"step-dialog"},on:{"on-ok":e.closeWithSave,"on-cancel":e.closeWithoutSave},model:{value:e.showModal,callback:function(t){e.showModal=t},expression:"showModal"}},[n(e.currentView,{ref:"child",tag:"component",on:{ModalOpened:e.fitStyle}}),e._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.closeWithoutSave}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.closeWithSave}},[e._v("确定")])],1)],1):e._e()},staticRenderFns:[]}},772:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{ref:"form",attrs:{rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"步骤名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"步骤名称"},model:{value:e.step.name,callback:function(t){e.$set(e.step,"name",t)},expression:"step.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"执行次数"}},[n("el-input-number",{attrs:{placeholder:"执行次数",min:1},model:{value:e.step.limit,callback:function(t){e.$set(e.step,"limit",t)},expression:"step.limit"}})],1),e._v(" "),n("br"),e._v(" "),n("el-button",{attrs:{icon:"plus"},on:{click:e._addRecord}}),e._v(" "),n("br"),n("br"),e._v(" "),n("el-table",{attrs:{data:e.step.fields,stripe:"",border:"","max-height":300}},[n("el-table-column",{attrs:{type:"index",width:60}}),e._v(" "),n("el-table-column",{attrs:{label:"名称",width:100},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("el-input",{attrs:{size:"mini"},model:{value:t.row.name,callback:function(n){e.$set(t.row,"name",n)},expression:"scope.row.name"}}):n("div",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"类型",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("el-select",{attrs:{size:"mini"},model:{value:t.row.type,callback:function(n){e.$set(t.row,"type",n)},expression:"scope.row.type"}},e._l(e.options.inputTypes,function(e){return n("el-option",{attrs:{value:e}})})):n("div",[e._v(e._s(t.row.type))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"值",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("el-input",{attrs:{size:"mini"},model:{value:t.row.nullif,callback:function(n){e.$set(t.row,"nullif",n)},expression:"scope.row.nullif"}}):n("div",[e._v(e._s(t.row.nullif))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"设为空",width:100},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("el-select",{attrs:{size:"mini"},model:{value:t.row.set_empty_string,callback:function(n){e.$set(t.row,"set_empty_string",n)},expression:"scope.row.set_empty_string"}},[n("el-option",{attrs:{label:"是",value:"Y"}}),e._v(" "),n("el-option",{attrs:{label:"否",value:"N"}})],1):n("div",[e._v(e._s(t.row.set_empty_string))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"控制",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(n){e.reverseEditState(t.$index,t.row)}}},[e._v("编辑")])],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])],1)],1)]}}])})],1)],1)},staticRenderFns:[]}},773:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"基本设置",name:"first"}},[n("el-form",{ref:"form1",attrs:{"label-width":"100px"}},[n("el-form-item",{attrs:{label:"校验字段"}},[n("el-select",{model:{value:e.field.name,callback:function(t){e.$set(e.field,"name",t)},expression:"field.name"}},e._l(e.availableFields,function(e){return n("el-option",{attrs:{value:e.name}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"错误代码"}},[n("el-input",{model:{value:e.field.error_code,callback:function(t){e.$set(e.field,"error_code",t)},expression:"field.error_code"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"错误描述"}},[n("el-input",{model:{value:e.field.error_description,callback:function(t){e.$set(e.field,"error_description",t)},expression:"field.error_description"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"检验数据类型"}},[n("el-row",[n("el-checkbox",{attrs:{"true-label":"Y","false-label":"N"},model:{value:e.field.data_type_verified,callback:function(t){e.$set(e.field,"data_type_verified",t)},expression:"field.data_type_verified"}})],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"数据类型"}},[n("el-select",{attrs:{disabled:"N"==e.field.data_type_verified,clearable:""},model:{value:e.field.data_type,callback:function(t){e.$set(e.field,"data_type",t)},expression:"field.data_type"}},e._l(e.options.inputTypes,function(e){return n("el-option",{attrs:{value:e}})}))],1)],1)],1),e._v(" "),n("el-tab-pane",{attrs:{label:"数据校验",name:"second"}},[n("el-form",{ref:"form2",attrs:{"label-width":"140px"}},[n("el-form-item",{attrs:{label:"允许空"}},[n("el-row",[n("el-col",{attrs:{span:4}},[n("el-checkbox",{attrs:{"true-label":"Y","false-label":"N"},model:{value:e.field.null_allowed,callback:function(t){e.$set(e.field,"null_allowed",t)},expression:"field.null_allowed"}})],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("label",[e._v("只允许空")]),e._v(" "),n("el-checkbox",{
attrs:{"true-label":"Y","false-label":"N"},model:{value:e.field.only_null_allowed,callback:function(t){e.$set(e.field,"only_null_allowed",t)},expression:"field.only_null_allowed"}})],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("label",[e._v("只允许数值类型的数据")]),e._v(" "),n("el-checkbox",{attrs:{"true-label":"Y","false-label":"N"},model:{value:e.field.only_numeric_allowed,callback:function(t){e.$set(e.field,"only_numeric_allowed",t)},expression:"field.only_numeric_allowed"}})],1)],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"最大字符串长度"}},[n("el-input-number",{attrs:{min:0},model:{value:e.field.max_length,callback:function(t){e.$set(e.field,"max_length",t)},expression:"field.max_length"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"最小字符串长度"}},[n("el-input-number",{attrs:{min:0},model:{value:e.field.min_length,callback:function(t){e.$set(e.field,"min_length",t)},expression:"field.min_length"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"最大值"}},[n("el-input-number",{model:{value:e.field.max_value,callback:function(t){e.$set(e.field,"max_value",t)},expression:"field.max_value"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"最小值"}},[n("el-input-number",{model:{value:e.field.min_value,callback:function(t){e.$set(e.field,"min_value",t)},expression:"field.min_value"}})],1)],1)],1),e._v(" "),n("el-tab-pane",{attrs:{label:"字符串匹配",name:"third"}},[n("el-form",{ref:"form3",attrs:{"label-width":"180px"}},[n("el-form-item",{attrs:{label:"允许开始的字符串"}},[n("el-input",{model:{value:e.field.start_string,callback:function(t){e.$set(e.field,"start_string",t)},expression:"field.start_string"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"允许结束的字符串"}},[n("el-input",{model:{value:e.field.end_string,callback:function(t){e.$set(e.field,"end_string",t)},expression:"field.end_string"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"不允许开始的字符串"}},[n("el-input",{model:{value:e.field.start_string_not_allowed,callback:function(t){e.$set(e.field,"start_string_not_allowed",t)},expression:"field.start_string_not_allowed"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"不允许结束的字符串"}},[n("el-input",{model:{value:e.field.end_string_not_allowed,callback:function(t){e.$set(e.field,"end_string_not_allowed",t)},expression:"field.end_string_not_allowed"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"合法数据的正则表达式"}},[n("el-input",{model:{value:e.field.regular_expression,callback:function(t){e.$set(e.field,"regular_expression",t)},expression:"field.regular_expression"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"不合法数据的正则表达式"}},[n("el-input",{model:{value:e.field.regular_expression_not_allowed,callback:function(t){e.$set(e.field,"regular_expression_not_allowed",t)},expression:"field.regular_expression_not_allowed"}})],1)],1)],1),e._v(" "),n("el-tab-pane",{attrs:{label:"从步骤中取值",name:"4th"}},[n("el-form",{ref:"form4",attrs:{"label-width":"140px"}},[n("el-form-item",{attrs:{label:"允许的值"}},[n("el-input",{staticStyle:{width:"350px"},attrs:{type:"textarea",disabled:"Y"==e.field.is_sourcing_values,autosize:{minRows:2,maxRows:6},placeholder:"请输入内容,以逗号分割"},model:{value:e.field.allowed_value,callback:function(t){e.$set(e.field,"allowed_value",t)},expression:"field.allowed_value"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"从其他步骤获得值"}},[n("el-checkbox",{attrs:{"true-label":"Y","false-label":"N"},model:{value:e.field.is_sourcing_values,callback:function(t){e.$set(e.field,"is_sourcing_values",t)},expression:"field.is_sourcing_values"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"读取步骤"}},[n("el-select",{attrs:{disabled:"N"==e.field.is_sourcing_values,clearable:""},model:{value:e.field.sourcing_step,callback:function(t){e.$set(e.field,"sourcing_step",t)},expression:"field.sourcing_step"}},e._l(e.stepList,function(e){return n("el-option",{attrs:{label:e.step,value:e.id}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"读取字段"}},[n("el-select",{attrs:{disabled:"N"==e.field.is_sourcing_values,clearable:""},model:{value:e.field.sourcing_field,callback:function(t){e.$set(e.field,"sourcing_field",t)},expression:"field.sourcing_field"}},e._l(e.fieldList,function(e){return n("el-option",{attrs:{value:e.name}})}))],1)],1)],1)],1)},staticRenderFns:[]}},774:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{ref:"form",attrs:{model:e.step,rules:e.rules,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"步骤名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入步骤名称"},model:{value:e.step.name,callback:function(t){e.$set(e.step,"name",t)},expression:"step.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"数据源选择"}},[n("el-row",[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{prop:"connection"}},[n("el-select",{attrs:{placeholder:"目标数据源"},model:{value:e.step.connection,callback:function(t){e.$set(e.step,"connection",t)},expression:"step.connection"}},e._l(e.dataSource.sourceList,function(t){return n("el-option",{attrs:{label:t.name,value:t.id}},[n("span",{staticStyle:{float:"left"}},[e._v(e._s(t.name))]),e._v(" "),n("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.type))])])}))],1)],1),e._v(" "),n("el-col",{attrs:{span:8,offset:1}},[n("el-form-item",{attrs:{prop:"table"}},[n("el-select",{attrs:{placeholder:"目标表.."},model:{value:e.step.table,callback:function(t){e.$set(e.step,"table",t)},expression:"step.table"}},e._l(e.dataSource.tables,function(e){return n("el-option",{attrs:{label:e.cnname,value:e.name}})}))],1)],1)],1)],1),e._v(" "),n("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"提交记录数"}},[n("el-input-number",{attrs:{min:0,step:1e3},model:{value:e.step.commit,callback:function(t){e.$set(e.step,"commit",t)},expression:"step.commit"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"不执行任何更新"}},[n("el-checkbox",{staticStyle:{"padding-right":"50px"},attrs:{"true-label":"Y","false-label":"N"},model:{value:e.step.update_bypassed,callback:function(t){e.$set(e.step,"update_bypassed",t)},expression:"step.update_bypassed"}})],1),e._v(" "),n("el-button-group",[n("el-button",{attrs:{icon:"plus"},on:{click:e.addQuery}},[e._v("查询字段")]),e._v(" "),n("el-button",{staticStyle:{"margin-left":"25px"},attrs:{icon:"plus"},on:{click:e.addUpdate}},[e._v("更新字段")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.fetchFieldsFromTable(e.transportFields)}}},[e._v("获取更新字段")])],1),e._v(" "),n("br"),n("br"),e._v(" "),n("el-table",{attrs:{data:e.step.queryList,stripe:"",border:"","max-height":150}},[n("el-table-column",{attrs:{type:"index",width:60}}),e._v(" "),n("el-table-column",{attrs:{label:"名称",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-select",{model:{value:t.row.field,callback:function(n){e.$set(t.row,"field",n)},expression:"scope.row.field"}},e._l(e.selectedTable.columnList,function(e){return n("el-option",{attrs:{value:e.name}})}))],1):n("div",[e._v(e._s(t.row.field))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"比较符",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",{staticClass:"control"},[n("el-select",{model:{value:t.row.condition,callback:function(n){e.$set(t.row,"condition",n)},expression:"scope.row.condition"}},e._l(e.options.whereCondition,function(e){return n("el-option",{attrs:{value:e}})}))],1):n("div",[e._v(e._s(t.row.condition))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"流字段A",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",{staticClass:"control"},[n("el-select",{model:{value:t.row.name,callback:function(n){e.$set(t.row,"name",n)},expression:"scope.row.name"}},e._l(e.step.availableFields,function(e){return n("el-option",{attrs:{value:e.name}})}))],1):n("div",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"流字段B",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",{staticClass:"control"},[n("el-select",{model:{value:t.row.name2,callback:function(n){e.$set(t.row,"name2",n)},expression:"scope.row.name2"}},e._l(e.step.availableFields,function(e){return n("el-option",{attrs:{value:e.name}})}))],1):n("div",[e._v(e._s(t.row.name2))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"控制",width:140},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"small",type:"info"},on:{click:function(n){e.reverseEditState(t.$index,t.row)}}},[e._v("编辑")])],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(n){e.handleDelete(t.$index,t.row,e.step.queryList)}}},[e._v("删除\n            ")])],1)],1)]}}])})],1),e._v(" "),n("br"),e._v(" "),n("el-table",{attrs:{data:e.step.updateList,stripe:"",border:"","max-height":150}},[n("el-table-column",{attrs:{type:"index",width:60}}),e._v(" "),n("el-table-column",{attrs:{label:"表字段",width:190},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",[n("el-select",{model:{value:t.row.name,callback:function(n){e.$set(t.row,"name",n)},expression:"scope.row.name"}},e._l(e.selectedTable.columnList,function(e){return n("el-option",{attrs:{value:e.name}})}))],1):n("div",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"流字段",width:190},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",{staticClass:"control"},[n("el-select",{model:{value:t.row.rename,callback:function(n){e.$set(t.row,"rename",n)},expression:"scope.row.rename"}},e._l(e.step.availableFields,function(e){return n("el-option",{attrs:{value:e.name}})}))],1):n("div",[e._v(e._s(t.row.rename))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"更新",width:100},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("div",{staticClass:"control"},[n("el-select",{model:{value:t.row.update,callback:function(n){e.$set(t.row,"update",n)},expression:"scope.row.update"}},[n("el-option",{attrs:{value:"Y"}}),e._v(" "),n("el-option",{attrs:{value:"N"}})],1)],1):n("div",[e._v(e._s(t.row.update))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"控制",width:140},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"small",type:"info"},on:{click:function(n){e.reverseEditState(t.$index,t.row)}}},[e._v("编辑")])],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(n){e.handleDelete(t.$index,t.row,e.step.updateList)}}},[e._v("删除\n            ")])],1)],1)]}}])})],1)],1)},staticRenderFns:[]}},775:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{width:"600px"}},[n("el-form",{ref:"form",attrs:{rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"步骤名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"步骤名称"},model:{value:e.step.name,callback:function(t){e.$set(e.step,"name",t)},expression:"step.name"}})],1)],1)],1)},staticRenderFns:[]}},776:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-row",[e.readOnly?e._e():n("el-col",{attrs:{span:4}},[n("div",{staticClass:"left"},[e.readOnly?e._e():n("tree")],1)]),e._v(" "),n("el-col",{staticClass:"right",attrs:{span:e.readOnly?24:20}},[n("div",{attrs:{id:"drawArea"}},[n("draw-area",{attrs:{readOnly:e.readOnly}})],1)])],1)],1)},staticRenderFns:[]}},778:function(e,t,n){n(259),e.exports=n(258)},80:function(e,t,n){"use strict";var l=n(170),a=n(16),i=n.n(a),s=n(334);i.a.use(l.b),t.a=new l.b.Store({modules:{step:s.a}})}},[778]);
//# sourceMappingURL=app.00e7b19555c42d19e9d3.js.map